<!DOCTYPE html>
<html lang="en">
<head>
    <title>ApplicationHelper</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/panel.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/turbolinks.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/search_index.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/searcher.js" type="text/javascript" charset="utf-8"></script>
<script src="../panel/tree.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/searchdoc.js" type="text/javascript" charset="utf-8"></script>
<meta name="data-rel-prefix" content="../">
<meta name="data-tree-keys" content='["ApplicationHelper"]'>


    <meta property="og:title" value="ApplicationHelper">

  
    
    <meta name="description" content="encoding: utf-8  Methods added to this helper will be available to all templates in the application.">
    <meta property="og:description" content="encoding: utf-8  Methods added to this helper will be available to all templates in the application.">
  

    <meta name="keywords" content="ApplicationHelper class, num2letterID, windowed_pagination_links, compact_date, friend_button, char_wrap, id_for, is_me?, is_not_me?, is_admin?, is_site_admin?, is_curator?, curator_of?, member_of?, link_to_function, link_to_toggle, link_to_toggle_box, link_to_toggle_menu, link_to_dialog, link_to_tip, url_for_params, hidden_fields_for_params, modal_image, stripped_first_paragraph_of_text, remaining_paragraphs_of_text, formatted_user_text, formatted_error_sentence_for, simple_format_with_structure, title_by_user, markdown, render_in_format, in_format, taxonomic_taxon_list, user_image, user_seen_announcement?, observation_image, image_and_content, compact, one_line_observation, html_attributize, separator, serial_id, image_url, truncate_with_more, native_url_for_photo, flickr_buddyicon, helptip_for, helptip, popover, month_graph, catch_and_release, citation_for, link_to_taxon, link_to, loading, setup_map_tag_attrs, append_taxon_layers, append_place_layers, append_observation_layers, adjust_initial_bounds, observations_for_map_tag_attrs, append_bounds_to_map_tag_attrs, colors_for_taxa, iconic_taxon_color_for, iconic_taxon_colors, google_static_map_for_observation_url, rights, rights_for_observation, rights_for_media, url_for_license, license_name, update_image_for, bootstrapTargetID, lowercase_equivalent_model_name_for, update_tagline_for, activity_snippet, url_for_resource_with_host, commas_and, observation_field_value_for, cite, references, establishment_blob, uri_join, google_maps_js, leaflet_js, machine_tag_pieces, tag_to_xml, flexible_post_path, flexible_post_url, post_parent_path, post_archives_by_month_path, edit_post_path, feature_test, favicon_url_for, json_escape, has_t?, hyperlink_mentions, shareable_description, branding_statement, responsive?, photo_type_label, url_for_referrer_or_default, current_url, errors_for_hidden_fields, sortable_table_header, geoprivacy_with_consistent_case, translate_with_consistent_case">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Module</span>
            ApplicationHelper
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/app/helpers/application_helper_rb.html">app/helpers/application_helper.rb</a></li>
            
        </ul>
        
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>encoding: utf-8</p>

<pre><code>Methods added to this helper will be available to all templates in the application.
require &#39;recaptcha&#39;
</code></pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-activity_snippet">activity_snippet</a>,
              </li>
            
              
              <li>
                <a href="#method-i-adjust_initial_bounds">adjust_initial_bounds</a>,
              </li>
            
              
              <li>
                <a href="#method-i-append_bounds_to_map_tag_attrs">append_bounds_to_map_tag_attrs</a>,
              </li>
            
              
              <li>
                <a href="#method-i-append_observation_layers">append_observation_layers</a>,
              </li>
            
              
              <li>
                <a href="#method-i-append_place_layers">append_place_layers</a>,
              </li>
            
              
              <li>
                <a href="#method-i-append_taxon_layers">append_taxon_layers</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-bootstrapTargetID">bootstrapTargetID</a>,
              </li>
            
              
              <li>
                <a href="#method-i-branding_statement">branding_statement</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-catch_and_release">catch_and_release</a>,
              </li>
            
              
              <li>
                <a href="#method-i-char_wrap">char_wrap</a>,
              </li>
            
              
              <li>
                <a href="#method-i-citation_for">citation_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-cite">cite</a>,
              </li>
            
              
              <li>
                <a href="#method-i-colors_for_taxa">colors_for_taxa</a>,
              </li>
            
              
              <li>
                <a href="#method-i-commas_and">commas_and</a>,
              </li>
            
              
              <li>
                <a href="#method-i-compact">compact</a>,
              </li>
            
              
              <li>
                <a href="#method-i-compact_date">compact_date</a>,
              </li>
            
              
              <li>
                <a href="#method-i-curator_of-3F">curator_of?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-current_url">current_url</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-edit_post_path">edit_post_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-errors_for_hidden_fields">errors_for_hidden_fields</a>,
              </li>
            
              
              <li>
                <a href="#method-i-establishment_blob">establishment_blob</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-favicon_url_for">favicon_url_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-feature_test">feature_test</a>,
              </li>
            
              
              <li>
                <a href="#method-i-flexible_post_path">flexible_post_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-flexible_post_url">flexible_post_url</a>,
              </li>
            
              
              <li>
                <a href="#method-i-flickr_buddyicon">flickr_buddyicon</a>,
              </li>
            
              
              <li>
                <a href="#method-i-formatted_error_sentence_for">formatted_error_sentence_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-formatted_user_text">formatted_user_text</a>,
              </li>
            
              
              <li>
                <a href="#method-i-friend_button">friend_button</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-geoprivacy_with_consistent_case">geoprivacy_with_consistent_case</a>,
              </li>
            
              
              <li>
                <a href="#method-i-google_maps_js">google_maps_js</a>,
              </li>
            
              
              <li>
                <a href="#method-i-google_static_map_for_observation_url">google_static_map_for_observation_url</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-has_t-3F">has_t?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-helptip">helptip</a>,
              </li>
            
              
              <li>
                <a href="#method-i-helptip_for">helptip_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-hidden_fields_for_params">hidden_fields_for_params</a>,
              </li>
            
              
              <li>
                <a href="#method-i-html_attributize">html_attributize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-hyperlink_mentions">hyperlink_mentions</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-iconic_taxon_color_for">iconic_taxon_color_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-iconic_taxon_colors">iconic_taxon_colors</a>,
              </li>
            
              
              <li>
                <a href="#method-i-id_for">id_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-image_and_content">image_and_content</a>,
              </li>
            
              
              <li>
                <a href="#method-i-image_url">image_url</a>,
              </li>
            
              
              <li>
                <a href="#method-i-in_format">in_format</a>,
              </li>
            
              
              <li>
                <a href="#method-i-is_admin-3F">is_admin?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-is_curator-3F">is_curator?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-is_me-3F">is_me?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-is_not_me-3F">is_not_me?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-is_site_admin-3F">is_site_admin?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>J</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-json_escape">json_escape</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-leaflet_js">leaflet_js</a>,
              </li>
            
              
              <li>
                <a href="#method-i-license_name">license_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to">link_to</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to_dialog">link_to_dialog</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to_function">link_to_function</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to_taxon">link_to_taxon</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to_tip">link_to_tip</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to_toggle">link_to_toggle</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to_toggle_box">link_to_toggle_box</a>,
              </li>
            
              
              <li>
                <a href="#method-i-link_to_toggle_menu">link_to_toggle_menu</a>,
              </li>
            
              
              <li>
                <a href="#method-i-loading">loading</a>,
              </li>
            
              
              <li>
                <a href="#method-i-lowercase_equivalent_model_name_for">lowercase_equivalent_model_name_for</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-machine_tag_pieces">machine_tag_pieces</a>,
              </li>
            
              
              <li>
                <a href="#method-i-markdown">markdown</a>,
              </li>
            
              
              <li>
                <a href="#method-i-member_of-3F">member_of?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-modal_image">modal_image</a>,
              </li>
            
              
              <li>
                <a href="#method-i-month_graph">month_graph</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-native_url_for_photo">native_url_for_photo</a>,
              </li>
            
              
              <li>
                <a href="#method-i-num2letterID">num2letterID</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-observation_field_value_for">observation_field_value_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-observation_image">observation_image</a>,
              </li>
            
              
              <li>
                <a href="#method-i-observations_for_map_tag_attrs">observations_for_map_tag_attrs</a>,
              </li>
            
              
              <li>
                <a href="#method-i-one_line_observation">one_line_observation</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-photo_type_label">photo_type_label</a>,
              </li>
            
              
              <li>
                <a href="#method-i-popover">popover</a>,
              </li>
            
              
              <li>
                <a href="#method-i-post_archives_by_month_path">post_archives_by_month_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-post_parent_path">post_parent_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-references">references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remaining_paragraphs_of_text">remaining_paragraphs_of_text</a>,
              </li>
            
              
              <li>
                <a href="#method-i-render_in_format">render_in_format</a>,
              </li>
            
              
              <li>
                <a href="#method-i-responsive-3F">responsive?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rights">rights</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rights_for_media">rights_for_media</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rights_for_observation">rights_for_observation</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-separator">separator</a>,
              </li>
            
              
              <li>
                <a href="#method-i-serial_id">serial_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setup_map_tag_attrs">setup_map_tag_attrs</a>,
              </li>
            
              
              <li>
                <a href="#method-i-shareable_description">shareable_description</a>,
              </li>
            
              
              <li>
                <a href="#method-i-simple_format_with_structure">simple_format_with_structure</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sortable_table_header">sortable_table_header</a>,
              </li>
            
              
              <li>
                <a href="#method-i-stripped_first_paragraph_of_text">stripped_first_paragraph_of_text</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-tag_to_xml">tag_to_xml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-taxonomic_taxon_list">taxonomic_taxon_list</a>,
              </li>
            
              
              <li>
                <a href="#method-i-title_by_user">title_by_user</a>,
              </li>
            
              
              <li>
                <a href="#method-i-translate_with_consistent_case">translate_with_consistent_case</a>,
              </li>
            
              
              <li>
                <a href="#method-i-truncate_with_more">truncate_with_more</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-update_image_for">update_image_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_tagline_for">update_tagline_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-uri_join">uri_join</a>,
              </li>
            
              
              <li>
                <a href="#method-i-url_for_license">url_for_license</a>,
              </li>
            
              
              <li>
                <a href="#method-i-url_for_params">url_for_params</a>,
              </li>
            
              
              <li>
                <a href="#method-i-url_for_referrer_or_default">url_for_referrer_or_default</a>,
              </li>
            
              
              <li>
                <a href="#method-i-url_for_resource_with_host">url_for_resource_with_host</a>,
              </li>
            
              
              <li>
                <a href="#method-i-user_image">user_image</a>,
              </li>
            
              
              <li>
                <a href="#method-i-user_seen_announcement-3F">user_seen_announcement?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>W</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-windowed_pagination_links">windowed_pagination_links</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="Ambidextrous.html">
              Ambidextrous
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
    
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-activity_snippet">
            
              <b>activity_snippet</b>(update, notifier, notifier_user, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-activity_snippet" name="method-i-activity_snippet" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-activity_snippet_source')" id="l_method-i-activity_snippet_source">show</a>
                

                

                
              </p>
              <div id="method-i-activity_snippet_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1234</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">activity_snippet</span>(<span class="ruby-identifier">update</span>, <span class="ruby-identifier">notifier</span>, <span class="ruby-identifier">notifier_user</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1235</span>   <span class="ruby-identifier">opts</span> = {}
<span class="line-num">1236</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">notification</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;activity&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">notifier_user</span>
<span class="line-num">1237</span>     <span class="ruby-identifier">notifier_class_name</span> = <span class="ruby-identifier">lowercase_equivalent_model_name_for</span>( <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">class</span> )
<span class="line-num">1238</span>     <span class="ruby-identifier">key</span> = <span class="ruby-string">&quot;user_added_&quot;</span>
<span class="line-num">1239</span>     <span class="ruby-identifier">opts</span> = {
<span class="line-num">1240</span>       <span class="ruby-value">user:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">person_url</span>(<span class="ruby-identifier">notifier_user</span>)),
<span class="line-num">1241</span>       <span class="ruby-value">x:</span> <span class="ruby-identifier">notifier_class_name</span>,
<span class="line-num">1242</span>       <span class="ruby-value">gender:</span> <span class="ruby-identifier">notifier_class_name</span>
<span class="line-num">1243</span>     }
<span class="line-num">1244</span>     <span class="ruby-identifier">key</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">notifier_class_name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^[aeiou]/i</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;an&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;a&#39;</span>
<span class="line-num">1245</span>     <span class="ruby-identifier">key</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;_x_to&#39;</span>
<span class="line-num">1246</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">notification</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;mention&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">notifier_user</span>
<span class="line-num">1247</span>     <span class="ruby-identifier">key</span> = <span class="ruby-string">&quot;mentioned_you_in&quot;</span>
<span class="line-num">1248</span>     <span class="ruby-identifier">opts</span> = {
<span class="line-num">1249</span>       <span class="ruby-value">user:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">person_url</span>(<span class="ruby-identifier">notifier_user</span>)),
<span class="line-num">1250</span>       <span class="ruby-value">x:</span> <span class="ruby-identifier">notifier_class_name</span>
<span class="line-num">1251</span>     }
<span class="line-num">1252</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1253</span>     <span class="ruby-identifier">key</span> = <span class="ruby-string">&quot;new_activity_on&quot;</span>
<span class="line-num">1254</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1255</span> 
<span class="line-num">1256</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:noun</span>]
<span class="line-num">1257</span>     <span class="ruby-identifier">key</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;_noun&#39;</span>
<span class="line-num">1258</span>     <span class="ruby-identifier">opts</span>[<span class="ruby-value">:noun</span>] = <span class="ruby-identifier">options</span>[<span class="ruby-value">:noun</span>]
<span class="line-num">1259</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1260</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_owner</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_owner</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">notifier_user</span>
<span class="line-num">1261</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">is_admin?</span>
<span class="line-num">1262</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:current_user</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_owner</span>
<span class="line-num">1263</span>         <span class="ruby-identifier">key</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;_by_you&#39;</span>
<span class="line-num">1264</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1265</span>         <span class="ruby-identifier">key</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;_by_user&#39;</span>
<span class="line-num">1266</span>         <span class="ruby-identifier">opts</span>[<span class="ruby-value">:by</span>] = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_owner</span>.<span class="ruby-identifier">login</span>
<span class="line-num">1267</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1268</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1269</span>       <span class="ruby-identifier">key</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;_by&#39;</span>
<span class="line-num">1270</span>       <span class="ruby-identifier">opts</span>[<span class="ruby-value">:by</span>] = <span class="ruby-identifier">you_or_login</span>(<span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_owner</span>, <span class="ruby-value">:capitalize_it</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>)
<span class="line-num">1271</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1272</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1273</span>   <span class="ruby-identifier">key</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;_html&#39;</span>
<span class="line-num">1274</span>   <span class="ruby-identifier">t</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">opts</span>)
<span class="line-num">1275</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-adjust_initial_bounds">
            
              <b>adjust_initial_bounds</b>(map_tag_attrs, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-adjust_initial_bounds" name="method-i-adjust_initial_bounds" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-adjust_initial_bounds_source')" id="l_method-i-adjust_initial_bounds_source">show</a>
                

                

                
              </p>
              <div id="method-i-adjust_initial_bounds_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">797</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">adjust_initial_bounds</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">798</span>   <span class="ruby-comment"># Adjust the map bounds based on the content being displayed</span>
<span class="line-num">799</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:zoom_level</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;min-x&quot;</span>]
<span class="line-num">800</span>     <span class="ruby-comment"># taxon observations / grids</span>
<span class="line-num">801</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_layers</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:focus</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:focus</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:taxon</span>)
<span class="line-num">802</span>       <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_layers</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">layer</span><span class="ruby-operator">|</span>
<span class="line-num">803</span>         <span class="ruby-identifier">append_bounds_to_map_tag_attrs</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">layer</span>[<span class="ruby-value">:taxon</span>])
<span class="line-num">804</span>       <span class="ruby-keyword">end</span>
<span class="line-num">805</span>     <span class="ruby-keyword">end</span>
<span class="line-num">806</span>     <span class="ruby-comment"># taxon ranges</span>
<span class="line-num">807</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_layers</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:show_range</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:focus</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:focus</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:range</span>)
<span class="line-num">808</span>       <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_layers</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">layer</span><span class="ruby-operator">|</span>
<span class="line-num">809</span>         <span class="ruby-identifier">append_bounds_to_map_tag_attrs</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">layer</span>[<span class="ruby-value">:taxon</span>].<span class="ruby-identifier">taxon_range_without_geom</span>)
<span class="line-num">810</span>       <span class="ruby-keyword">end</span>
<span class="line-num">811</span>     <span class="ruby-keyword">end</span>
<span class="line-num">812</span>     <span class="ruby-comment"># place geometries</span>
<span class="line-num">813</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:place_layers</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:focus</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:focus</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:place</span>)
<span class="line-num">814</span>       <span class="ruby-identifier">options</span>[<span class="ruby-value">:place_layers</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">layer</span><span class="ruby-operator">|</span>
<span class="line-num">815</span>         <span class="ruby-identifier">append_bounds_to_map_tag_attrs</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">layer</span>[<span class="ruby-value">:place</span>])
<span class="line-num">816</span>       <span class="ruby-keyword">end</span>
<span class="line-num">817</span>     <span class="ruby-keyword">end</span>
<span class="line-num">818</span>   <span class="ruby-keyword">end</span>
<span class="line-num">819</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-append_bounds_to_map_tag_attrs">
            
              <b>append_bounds_to_map_tag_attrs</b>(map_tag_attrs, instance_with_bounds)
            
            <a href="../classes/ApplicationHelper.html#method-i-append_bounds_to_map_tag_attrs" name="method-i-append_bounds_to_map_tag_attrs" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-append_bounds_to_map_tag_attrs_source')" id="l_method-i-append_bounds_to_map_tag_attrs_source">show</a>
                

                

                
              </p>
              <div id="method-i-append_bounds_to_map_tag_attrs_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">834</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">append_bounds_to_map_tag_attrs</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">instance_with_bounds</span>)
<span class="line-num">835</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">instance_with_bounds</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">instance_with_bounds</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:bounds</span>)
<span class="line-num">836</span>   <span class="ruby-identifier">bounds</span> = <span class="ruby-identifier">instance_with_bounds</span>.<span class="ruby-identifier">bounds</span>
<span class="line-num">837</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">bounds</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:min_x</span>]
<span class="line-num">838</span>     <span class="ruby-keyword">unless</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;min-x&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:min_x</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;min-x&quot;</span>]
<span class="line-num">839</span>       <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;min-x&quot;</span>] = <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:min_x</span>]
<span class="line-num">840</span>     <span class="ruby-keyword">end</span>
<span class="line-num">841</span>     <span class="ruby-keyword">unless</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;min-y&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:min_y</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;min-y&quot;</span>]
<span class="line-num">842</span>       <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;min-y&quot;</span>] = <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:min_y</span>]
<span class="line-num">843</span>     <span class="ruby-keyword">end</span>
<span class="line-num">844</span>     <span class="ruby-keyword">unless</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;max-x&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:max_x</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;max-x&quot;</span>]
<span class="line-num">845</span>       <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;max-x&quot;</span>] = <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:max_x</span>]
<span class="line-num">846</span>     <span class="ruby-keyword">end</span>
<span class="line-num">847</span>     <span class="ruby-keyword">unless</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;max-y&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:max_y</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;max-y&quot;</span>]
<span class="line-num">848</span>       <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;max-y&quot;</span>] = <span class="ruby-identifier">bounds</span>[<span class="ruby-value">:max_y</span>]
<span class="line-num">849</span>     <span class="ruby-keyword">end</span>
<span class="line-num">850</span>   <span class="ruby-keyword">end</span>
<span class="line-num">851</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-append_observation_layers">
            
              <b>append_observation_layers</b>(map_tag_attrs, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-append_observation_layers" name="method-i-append_observation_layers" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-append_observation_layers_source')" id="l_method-i-append_observation_layers_source">show</a>
                

                

                
              </p>
              <div id="method-i-append_observation_layers_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">785</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">append_observation_layers</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">786</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:observation_layers</span>]
<span class="line-num">787</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:observation_layers</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">layer</span><span class="ruby-operator">|</span>
<span class="line-num">788</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">observations</span> = <span class="ruby-identifier">layer</span>[<span class="ruby-value">:observations</span>]
<span class="line-num">789</span>         <span class="ruby-identifier">layer</span>[<span class="ruby-value">:observation_id</span>] = <span class="ruby-identifier">observations</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;,&quot;</span>)
<span class="line-num">790</span>         <span class="ruby-identifier">layer</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:observations</span>)
<span class="line-num">791</span>       <span class="ruby-keyword">end</span>
<span class="line-num">792</span>     <span class="ruby-keyword">end</span>
<span class="line-num">793</span>     <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;observation-layers&quot;</span>] = <span class="ruby-identifier">options</span>[<span class="ruby-value">:observation_layers</span>].<span class="ruby-identifier">to_json</span>
<span class="line-num">794</span>   <span class="ruby-keyword">end</span>
<span class="line-num">795</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-append_place_layers">
            
              <b>append_place_layers</b>(map_tag_attrs, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-append_place_layers" name="method-i-append_place_layers" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-append_place_layers_source')" id="l_method-i-append_place_layers_source">show</a>
                

                

                
              </p>
              <div id="method-i-append_place_layers_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">773</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">append_place_layers</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">774</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:place_layers</span>]
<span class="line-num">775</span>     <span class="ruby-identifier">place_layer_attrs</span> = [ ]
<span class="line-num">776</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:place_layers</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">layer</span><span class="ruby-operator">|</span>
<span class="line-num">777</span>       <span class="ruby-identifier">place_layer_attrs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">layer</span>.<span class="ruby-identifier">merge</span>({
<span class="line-num">778</span>         <span class="ruby-value">place:</span> <span class="ruby-identifier">layer</span>[<span class="ruby-value">:place</span>].<span class="ruby-identifier">as_json</span>(<span class="ruby-value">only:</span> [ <span class="ruby-value">:id</span>, <span class="ruby-value">:name</span> ])
<span class="line-num">779</span>       })
<span class="line-num">780</span>     <span class="ruby-keyword">end</span>
<span class="line-num">781</span>     <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;place-layers&quot;</span>] = <span class="ruby-identifier">place_layer_attrs</span>.<span class="ruby-identifier">to_json</span>
<span class="line-num">782</span>   <span class="ruby-keyword">end</span>
<span class="line-num">783</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-append_taxon_layers">
            
              <b>append_taxon_layers</b>(map_tag_attrs, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-append_taxon_layers" name="method-i-append_taxon_layers" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-append_taxon_layers_source')" id="l_method-i-append_taxon_layers_source">show</a>
                

                

                
              </p>
              <div id="method-i-append_taxon_layers_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">754</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">append_taxon_layers</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">755</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_layers</span>]
<span class="line-num">756</span>     <span class="ruby-identifier">taxon_layer_attrs</span> = [ ]
<span class="line-num">757</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_layers</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">layer</span><span class="ruby-operator">|</span>
<span class="line-num">758</span>       <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">layer</span>[<span class="ruby-value">:taxon</span>]
<span class="line-num">759</span>       <span class="ruby-identifier">layer_options</span> = <span class="ruby-identifier">layer</span>.<span class="ruby-identifier">merge</span>({
<span class="line-num">760</span>         <span class="ruby-value">taxon:</span> <span class="ruby-identifier">layer</span>[<span class="ruby-value">:taxon</span>].<span class="ruby-identifier">as_json</span>(
<span class="line-num">761</span>           <span class="ruby-value">only:</span> [ <span class="ruby-value">:id</span>, <span class="ruby-value">:name</span>, <span class="ruby-value">:rank</span> ],
<span class="line-num">762</span>           <span class="ruby-value">include:</span> { <span class="ruby-value">common_name:</span> { <span class="ruby-value">only:</span> [ <span class="ruby-value">:name</span> ] } }
<span class="line-num">763</span>         )
<span class="line-num">764</span>       })
<span class="line-num">765</span>       <span class="ruby-identifier">layer_options</span>[<span class="ruby-value">:taxon</span>][<span class="ruby-value">:to_styled_s</span>] = <span class="ruby-identifier">layer</span>[<span class="ruby-value">:taxon</span>].<span class="ruby-identifier">to_styled_s</span>(<span class="ruby-value">skip_common:</span> <span class="ruby-keyword">true</span>)
<span class="line-num">766</span>       <span class="ruby-identifier">layer_options</span>[<span class="ruby-value">:taxon</span>][<span class="ruby-value">:url</span>] = <span class="ruby-identifier">taxon_url</span>(<span class="ruby-identifier">layer</span>[<span class="ruby-value">:taxon</span>])
<span class="line-num">767</span>       <span class="ruby-identifier">taxon_layer_attrs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">layer_options</span>
<span class="line-num">768</span>     <span class="ruby-keyword">end</span>
<span class="line-num">769</span>     <span class="ruby-identifier">map_tag_attrs</span>[<span class="ruby-string">&quot;taxon-layers&quot;</span>] = <span class="ruby-identifier">taxon_layer_attrs</span>.<span class="ruby-identifier">to_json</span>
<span class="line-num">770</span>   <span class="ruby-keyword">end</span>
<span class="line-num">771</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-bootstrapTargetID">
            
              <b>bootstrapTargetID</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-bootstrapTargetID" name="method-i-bootstrapTargetID" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-bootstrapTargetID_source')" id="l_method-i-bootstrapTargetID_source">show</a>
                

                

                
              </p>
              <div id="method-i-bootstrapTargetID_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1042</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">bootstrapTargetID</span>
<span class="line-num">1043</span>    <span class="ruby-keyword">return</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">36</span><span class="ruby-operator">**</span><span class="ruby-value">8</span>).<span class="ruby-identifier">to_s</span>(<span class="ruby-value">36</span>)
<span class="line-num">1044</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-branding_statement">
            
              <b>branding_statement</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-branding_statement" name="method-i-branding_statement" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-branding_statement_source')" id="l_method-i-branding_statement_source">show</a>
                

                

                
              </p>
              <div id="method-i-branding_statement_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1529</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">branding_statement</span>
<span class="line-num">1530</span>   <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(
<span class="line-num">1531</span>     <span class="ruby-value">:member_of_the_inaturalist_network_a_joint_initiative_of_the_california_academy_of_sciences_and_the_national_geographic_society_html</span>,
<span class="line-num">1532</span>     <span class="ruby-value">partial_inat_network_tag_html:</span> <span class="ruby-string">&quot;&lt;a href=\&quot;https://www.inaturalist.org/sites/network\&quot;&gt;&quot;</span>,
<span class="line-num">1533</span>     <span class="ruby-value">cas_tag_html:</span> <span class="ruby-string">&quot;&lt;a href=\&quot;https://calacademy.org\&quot;&gt;California Academy of Sciences&lt;/a&gt;&quot;</span>,
<span class="line-num">1534</span>     <span class="ruby-value">nat_geo_tag_html:</span>  <span class="ruby-string">&quot;&lt;a href=\&quot;https://www.nationalgeographic.org\&quot;&gt;National Geographic Society&lt;/a&gt;&quot;</span>
<span class="line-num">1535</span>   ).<span class="ruby-identifier">html_safe</span>
<span class="line-num">1536</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-catch_and_release">
            
              <b>catch_and_release</b>(&amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-catch_and_release" name="method-i-catch_and_release" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-catch_and_release_source')" id="l_method-i-catch_and_release_source">show</a>
                

                

                
              </p>
              <div id="method-i-catch_and_release_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">638</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">catch_and_release</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">639</span>   <span class="ruby-identifier">concat</span> <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
<span class="line-num">640</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-char_wrap">
            
              <b>char_wrap</b>(text, len)
            
            <a href="../classes/ApplicationHelper.html#method-i-char_wrap" name="method-i-char_wrap" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-char_wrap_source')" id="l_method-i-char_wrap_source">show</a>
                

                

                
              </p>
              <div id="method-i-char_wrap_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">126</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">char_wrap</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">len</span>)
<span class="line-num">127</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">len</span>
<span class="line-num">128</span>   <span class="ruby-node">&quot;#{text[0..len-1]}&lt;br/&gt;#{char_wrap(text[len..-1], len)}&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">129</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-citation_for">
            
              <b>citation_for</b>(record)
            
            <a href="../classes/ApplicationHelper.html#method-i-citation_for" name="method-i-citation_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-citation_for_source')" id="l_method-i-citation_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-citation_for_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">642</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">citation_for</span>(<span class="ruby-identifier">record</span>)
<span class="line-num">643</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">t</span>(<span class="ruby-value">:unknown</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">644</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Source</span>)
<span class="line-num">645</span>     <span class="ruby-identifier">html</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">citation</span> <span class="ruby-operator">||</span> [<span class="ruby-identifier">record</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">record</span>.<span class="ruby-identifier">in_text</span>, <span class="ruby-identifier">record</span>.<span class="ruby-identifier">url</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)
<span class="line-num">646</span>     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; (&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">t</span>(<span class="ruby-value">:link</span>), <span class="ruby-identifier">record</span>.<span class="ruby-identifier">url</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;)&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">url</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">647</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">editable_by?</span>(<span class="ruby-identifier">current_user</span>)
<span class="line-num">648</span>       <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">t</span>(<span class="ruby-value">:edit_source</span>), <span class="ruby-identifier">edit_source_path</span>(<span class="ruby-identifier">record</span>), <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;nobr small&quot;</span>).<span class="ruby-identifier">html_safe</span>
<span class="line-num">649</span>     <span class="ruby-keyword">end</span>
<span class="line-num">650</span>     <span class="ruby-identifier">html</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">651</span>   <span class="ruby-keyword">else</span>
<span class="line-num">652</span>     <span class="ruby-identifier">render</span> <span class="ruby-value">:partial</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{record.class.to_s.underscore.pluralize}/citation&quot;</span>, <span class="ruby-value">:object</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">record</span>
<span class="line-num">653</span>   <span class="ruby-keyword">end</span>
<span class="line-num">654</span> <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">MissingTemplate</span>
<span class="line-num">655</span>   <span class="ruby-identifier">record</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/[\&lt;\&gt;]*/</span>, <span class="ruby-string">&#39;&#39;</span>)
<span class="line-num">656</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-cite">
            
              <b>cite</b>(citation = nil, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-cite" name="method-i-cite" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-cite_source')" id="l_method-i-cite_source">show</a>
                

                

                
              </p>
              <div id="method-i-cite_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1314</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cite</span>(<span class="ruby-identifier">citation</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">1315</span>   <span class="ruby-ivar">@_citations</span> <span class="ruby-operator">||=</span> []
<span class="line-num">1316</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">citation</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
<span class="line-num">1317</span>     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">citation</span>
<span class="line-num">1318</span>     <span class="ruby-identifier">citation</span> = <span class="ruby-keyword">nil</span>
<span class="line-num">1319</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1320</span>   <span class="ruby-identifier">cite_tag</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:tag</span>] <span class="ruby-operator">||</span> <span class="ruby-value">:sup</span>
<span class="line-num">1321</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">citation</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block_given?</span>
<span class="line-num">1322</span>     <span class="ruby-identifier">citation</span> = <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">1323</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1324</span>   <span class="ruby-identifier">citations</span> = [<span class="ruby-identifier">citation</span>].<span class="ruby-identifier">flatten</span>
<span class="line-num">1325</span>   <span class="ruby-identifier">links</span> = <span class="ruby-identifier">citations</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
<span class="line-num">1326</span>     <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">citation</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Source</span>)
<span class="line-num">1327</span>     <span class="ruby-ivar">@_citations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@_citations</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">c</span>)
<span class="line-num">1328</span>     <span class="ruby-identifier">i</span> = <span class="ruby-ivar">@_citations</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">c</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
<span class="line-num">1329</span>     <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">i</span>, <span class="ruby-node">&quot;#ref#{i}&quot;</span>, <span class="ruby-value">:name</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;cit#{i}&quot;</span>)
<span class="line-num">1330</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1331</span>   <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">cite_tag</span>, <span class="ruby-identifier">links</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;,&#39;</span>).<span class="ruby-identifier">html_safe</span>
<span class="line-num">1332</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-colors_for_taxa">
            
              <b>colors_for_taxa</b>(taxa)
            
            <a href="../classes/ApplicationHelper.html#method-i-colors_for_taxa" name="method-i-colors_for_taxa" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-colors_for_taxa_source')" id="l_method-i-colors_for_taxa_source">show</a>
                

                

                
              </p>
              <div id="method-i-colors_for_taxa_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">853</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">colors_for_taxa</span>(<span class="ruby-identifier">taxa</span>)
<span class="line-num">854</span>   <span class="ruby-comment"># single taxon single color</span>
<span class="line-num">855</span>   <span class="ruby-identifier">first_color</span> = <span class="ruby-identifier">iconic_taxon_color_for</span>(<span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">first</span>)
<span class="line-num">856</span>   <span class="ruby-keyword">return</span> {<span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">first_color</span>} <span class="ruby-keyword">if</span> <span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">857</span> 
<span class="line-num">858</span>   <span class="ruby-comment"># iconic taxon colors for unique iconic taxa</span>
<span class="line-num">859</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:iconic_taxon_id</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:iconic_taxon_id</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
<span class="line-num">860</span>     <span class="ruby-keyword">return</span> <span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">inject</span>({}) {<span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">obj</span><span class="ruby-operator">|</span> <span class="ruby-identifier">memo</span>[<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">iconic_taxon_color_for</span>(<span class="ruby-identifier">obj</span>); <span class="ruby-identifier">memo</span>}
<span class="line-num">861</span>   <span class="ruby-keyword">end</span>
<span class="line-num">862</span> 
<span class="line-num">863</span>   <span class="ruby-comment"># custom palette for more</span>
<span class="line-num">864</span>   <span class="ruby-identifier">palette</span> = <span class="ruby-identifier">iconic_taxon_colors</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">uniq</span> <span class="ruby-operator">+</span> <span class="ruby-node">%w(#d62728 #e377c2 #bcbd22 #17becf)</span>
<span class="line-num">865</span>   <span class="ruby-identifier">palette</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">palette</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">paint</span>.<span class="ruby-identifier">darken</span>.<span class="ruby-identifier">darken</span>.<span class="ruby-identifier">to_hex</span>}
<span class="line-num">866</span>   <span class="ruby-identifier">colors</span> = {}
<span class="line-num">867</span>   <span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">taxon</span>,<span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
<span class="line-num">868</span>     <span class="ruby-identifier">colors</span>[<span class="ruby-identifier">taxon</span>.<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">palette</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">%</span><span class="ruby-identifier">palette</span>.<span class="ruby-identifier">size</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;#333333&#39;</span>
<span class="line-num">869</span>   <span class="ruby-keyword">end</span>
<span class="line-num">870</span>   <span class="ruby-identifier">colors</span>
<span class="line-num">871</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-commas_and">
            
              <b>commas_and</b>(list, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-commas_and" name="method-i-commas_and" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-commas_and_source')" id="l_method-i-commas_and_source">show</a>
                

                

                
              </p>
              <div id="method-i-commas_and_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1281</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">commas_and</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1282</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">1283</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-node">&quot; #{t :and} &quot;</span>).<span class="ruby-identifier">html_safe</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
<span class="line-num">1284</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:separator</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;,&quot;</span>
<span class="line-num">1285</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:and</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">t</span>(<span class="ruby-value">:and</span>)
<span class="line-num">1286</span>   <span class="ruby-node">&quot;#{list[0..-2].join(&#39;, &#39;)}#{options[:separator]} #{options[:and]} #{list.last}&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1287</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-compact">
            
              <b>compact</b>(*args, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-compact" name="method-i-compact" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>remove unecessary whitespace btwn divs</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-compact_source')" id="l_method-i-compact_source">show</a>
                

                

                
              </p>
              <div id="method-i-compact_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">450</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compact</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">451</span>   <span class="ruby-identifier">content</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
<span class="line-num">452</span>   <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">:</span> {}
<span class="line-num">453</span>   <span class="ruby-identifier">content</span> = <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
<span class="line-num">454</span>   <span class="ruby-identifier">content</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">455</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:all_tags</span>]
<span class="line-num">456</span>     <span class="ruby-identifier">content</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/\&gt;[\n\s]+\&lt;/m</span>, <span class="ruby-string">&#39;&gt;&lt;&#39;</span>)
<span class="line-num">457</span>   <span class="ruby-keyword">else</span>
<span class="line-num">458</span>     <span class="ruby-identifier">content</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/div\&gt;[\n\s]+\&lt;div/</span>, <span class="ruby-string">&#39;div&gt;&lt;div&#39;</span>)
<span class="line-num">459</span>   <span class="ruby-keyword">end</span>
<span class="line-num">460</span>   <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">content</span>.<span class="ruby-identifier">html_safe</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">461</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-compact_date">
            
              <b>compact_date</b>( date, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-compact_date" name="method-i-compact_date" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-compact_date_source')" id="l_method-i-compact_date_source">show</a>
                

                

                
              </p>
              <div id="method-i-compact_date_source" class="dyn-source">
                <pre>   <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">38</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compact_date</span>( <span class="ruby-identifier">date</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">39</span>   <span class="ruby-identifier">obscured</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:obscured</span>]
<span class="line-num">40</span>   <span class="ruby-keyword">return</span> <span class="ruby-string">&#39;the past&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">date</span>.<span class="ruby-identifier">nil?</span>
<span class="line-num">41</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">date</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>)
<span class="line-num">42</span>     <span class="ruby-identifier">date</span> = <span class="ruby-identifier">date</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">time_zone</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_user</span>
<span class="line-num">43</span>     <span class="ruby-identifier">time</span> = <span class="ruby-identifier">date</span>
<span class="line-num">44</span>     <span class="ruby-identifier">date</span> = <span class="ruby-identifier">date</span>.<span class="ruby-identifier">to_date</span>
<span class="line-num">45</span>   <span class="ruby-keyword">end</span>
<span class="line-num">46</span>   <span class="ruby-identifier">today</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_user</span>
<span class="line-num">47</span>     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">time_zone</span>).<span class="ruby-identifier">to_date</span>
<span class="line-num">48</span>   <span class="ruby-keyword">else</span>
<span class="line-num">49</span>     <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
<span class="line-num">50</span>   <span class="ruby-keyword">end</span>
<span class="line-num">51</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">obscured</span>
<span class="line-num">52</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">l</span>( <span class="ruby-identifier">date</span>, <span class="ruby-value">format:</span> <span class="ruby-value">:month_year</span> )
<span class="line-num">53</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">date</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">today</span>
<span class="line-num">54</span>     <span class="ruby-identifier">time</span> <span class="ruby-operator">?</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">l</span>( <span class="ruby-identifier">time</span>, <span class="ruby-value">format:</span> <span class="ruby-value">:compact</span> ) <span class="ruby-operator">:</span> <span class="ruby-identifier">t</span>(<span class="ruby-value">:today</span>)
<span class="line-num">55</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">date</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">year</span> 
<span class="line-num">56</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">l</span>( <span class="ruby-identifier">date</span>.<span class="ruby-identifier">to_date</span>, <span class="ruby-value">format:</span> <span class="ruby-value">:compact</span> )
<span class="line-num">57</span>   <span class="ruby-keyword">else</span> 
<span class="line-num">58</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">l</span>( <span class="ruby-identifier">date</span>, <span class="ruby-value">format:</span> <span class="ruby-value">:month_day_year</span> )
<span class="line-num">59</span>   <span class="ruby-keyword">end</span> 
<span class="line-num">60</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-curator_of-3F">
            
              <b>curator_of?</b>(project)
            
            <a href="../classes/ApplicationHelper.html#method-i-curator_of-3F" name="method-i-curator_of-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-curator_of-3F_source')" id="l_method-i-curator_of-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-curator_of-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">161</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">curator_of?</span>(<span class="ruby-identifier">project</span>)
<span class="line-num">162</span>  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">logged_in?</span>
<span class="line-num">163</span>  <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">project_users</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:project_id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">project</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;role IN (&#39;manager&#39;, &#39;curator&#39;)&quot;</span>).<span class="ruby-identifier">exists?</span>
<span class="line-num">164</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-current_url">
            
              <b>current_url</b>(new_params)
            
            <a href="../classes/ApplicationHelper.html#method-i-current_url" name="method-i-current_url" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-current_url_source')" id="l_method-i-current_url_source">show</a>
                

                

                
              </p>
              <div id="method-i-current_url_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1563</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_url</span>(<span class="ruby-identifier">new_params</span>)
<span class="line-num">1564</span>  <span class="ruby-identifier">url_for</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">new_params</span>)
<span class="line-num">1565</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-edit_post_path">
            
              <b>edit_post_path</b>(post, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-edit_post_path" name="method-i-edit_post_path" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-edit_post_path_source')" id="l_method-i-edit_post_path_source">show</a>
                

                

                
              </p>
              <div id="method-i-edit_post_path_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1467</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">edit_post_path</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1468</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">edit_trip_path</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Trip</span>)
<span class="line-num">1469</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1470</span>     <span class="ruby-identifier">edit_journal_post_path</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">post</span>)
<span class="line-num">1471</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Site&quot;</span>
<span class="line-num">1472</span>     <span class="ruby-identifier">edit_site_post_path</span>(<span class="ruby-identifier">post</span>)
<span class="line-num">1473</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1474</span>     <span class="ruby-identifier">edit_project_journal_post_path</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">slug</span>, <span class="ruby-identifier">post</span>)
<span class="line-num">1475</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1476</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-errors_for_hidden_fields">
            
              <b>errors_for_hidden_fields</b>( record, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-errors_for_hidden_fields" name="method-i-errors_for_hidden_fields" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-errors_for_hidden_fields_source')" id="l_method-i-errors_for_hidden_fields_source">show</a>
                

                

                
              </p>
              <div id="method-i-errors_for_hidden_fields_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1567</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">errors_for_hidden_fields</span>( <span class="ruby-identifier">record</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">1568</span>   <span class="ruby-identifier">hidden_fields</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:hidden_fields</span>]
<span class="line-num">1569</span>   <span class="ruby-identifier">hidden_fields</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">messages</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">-</span> ( <span class="ruby-identifier">options</span>[<span class="ruby-value">:visible_fields</span>] <span class="ruby-operator">||</span> [] )
<span class="line-num">1570</span>   <span class="ruby-identifier">hidden_errors</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">messages</span>.<span class="ruby-identifier">slice</span>( <span class="ruby-operator">*</span><span class="ruby-identifier">hidden_fields</span> )
<span class="line-num">1571</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">hidden_errors</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">1572</span>   <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-value">class:</span> <span class="ruby-string">&quot;alert alert-warning&quot;</span> ) <span class="ruby-keyword">do</span>
<span class="line-num">1573</span>     <span class="ruby-identifier">s</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:h4</span>, <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-string">&quot;errors.template.body&quot;</span> ) )
<span class="line-num">1574</span>     <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:ul</span>) <span class="ruby-keyword">do</span>
<span class="line-num">1575</span>       <span class="ruby-identifier">hidden_errors</span>.<span class="ruby-identifier">inject</span>( <span class="ruby-string">&quot;&quot;</span> ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
<span class="line-num">1576</span>         <span class="ruby-identifier">k</span>, <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">pair</span>
<span class="line-num">1577</span>         <span class="ruby-identifier">memo</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">inject</span>( <span class="ruby-string">&quot;&quot;</span> ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
<span class="line-num">1578</span>           <span class="ruby-identifier">memo</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">content_tag</span>( <span class="ruby-value">:li</span>, <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-string">&quot;errors.format&quot;</span>,
<span class="line-num">1579</span>             <span class="ruby-value">attribute:</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-node">&quot;activerecord.attributes.#{record.class.name.underscore}.#{k}&quot;</span> ),
<span class="line-num">1580</span>             <span class="ruby-value">message:</span> <span class="ruby-identifier">e</span>
<span class="line-num">1581</span>           ) )
<span class="line-num">1582</span>           <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1583</span>         <span class="ruby-keyword">end</span>
<span class="line-num">1584</span>         <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1585</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1586</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1587</span>     <span class="ruby-identifier">s</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1588</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1589</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-establishment_blob">
            
              <b>establishment_blob</b>(listed_taxon, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-establishment_blob" name="method-i-establishment_blob" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-establishment_blob_source')" id="l_method-i-establishment_blob_source">show</a>
                

                

                
              </p>
              <div id="method-i-establishment_blob_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1352</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">establishment_blob</span>(<span class="ruby-identifier">listed_taxon</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1353</span>   <span class="ruby-identifier">icon_class</span> = <span class="ruby-identifier">listed_taxon</span>.<span class="ruby-identifier">introduced?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;ui-icon-notice&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;ui-icon-star&#39;</span>
<span class="line-num">1354</span>   <span class="ruby-identifier">tip_class</span> = <span class="ruby-identifier">listed_taxon</span>.<span class="ruby-identifier">introduced?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;ui-tooltip-error&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;ui-tooltip-success&#39;</span>
<span class="line-num">1355</span>   <span class="ruby-identifier">tip</span> = <span class="ruby-node">&quot;&lt;strong&gt;#{listed_taxon.establishment_means_label}&quot;</span>
<span class="line-num">1356</span>   <span class="ruby-identifier">tip</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; #{t(:in)} #{listed_taxon.place.display_name}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:show_place_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">listed_taxon</span>.<span class="ruby-identifier">place</span>
<span class="line-num">1357</span>   <span class="ruby-identifier">tip</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;:&lt;/strong&gt; #{listed_taxon.establishment_means_description}&quot;</span>
<span class="line-num">1358</span>   <span class="ruby-identifier">blob_attrs</span> = {
<span class="line-num">1359</span>     <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;blob #{listed_taxon.introduced? ? &#39;introduced&#39; : listed_taxon.establishment_means.underscore} #{options[:class]}&quot;</span>, 
<span class="line-num">1360</span>     <span class="ruby-string">&quot;data-tip&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">tip</span>, 
<span class="line-num">1361</span>     <span class="ruby-string">&quot;data-tip-position-at&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;bottom center&quot;</span>, 
<span class="line-num">1362</span>     <span class="ruby-string">&quot;data-tip-style-classes&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{tip_class} ui-tooltip-shadow&quot;</span>, 
<span class="line-num">1363</span>     <span class="ruby-value">:title</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">listed_taxon</span>.<span class="ruby-identifier">establishment_means</span>.<span class="ruby-identifier">capitalize</span>
<span class="line-num">1364</span>   }
<span class="line-num">1365</span>   <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:div</span>, <span class="ruby-identifier">blob_attrs</span> <span class="ruby-keyword">do</span>
<span class="line-num">1366</span>     <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:span</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;inlineblock ui-icon #{icon_class}&quot;</span> <span class="ruby-keyword">do</span>
<span class="line-num">1367</span>       <span class="ruby-identifier">listed_taxon</span>.<span class="ruby-identifier">introduced?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;I&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">listed_taxon</span>.<span class="ruby-identifier">establishment_means</span>.<span class="ruby-identifier">chars</span>.<span class="ruby-identifier">to_a</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">upcase</span>
<span class="line-num">1368</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1369</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1370</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-favicon_url_for">
            
              <b>favicon_url_for</b>(url)
            
            <a href="../classes/ApplicationHelper.html#method-i-favicon_url_for" name="method-i-favicon_url_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-favicon_url_for_source')" id="l_method-i-favicon_url_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-favicon_url_for_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1493</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">favicon_url_for</span>(<span class="ruby-identifier">url</span>)
<span class="line-num">1494</span>   <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">url</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
<span class="line-num">1495</span>   <span class="ruby-node">&quot;https://www.google.com/s2/favicons?domain=#{uri.try(:host)}&quot;</span>
<span class="line-num">1496</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-feature_test">
            
              <b>feature_test</b>(test, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-feature_test" name="method-i-feature_test" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-feature_test_source')" id="l_method-i-feature_test_source">show</a>
                

                

                
              </p>
              <div id="method-i-feature_test_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1478</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">feature_test</span>(<span class="ruby-identifier">test</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">1479</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:audience</span>] <span class="ruby-operator">||=</span> []
<span class="line-num">1480</span>   <span class="ruby-identifier">test_enabled</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:test</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:test</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">to_s</span>
<span class="line-num">1481</span>   <span class="ruby-identifier">user_authorized</span> = <span class="ruby-keyword">true</span>
<span class="line-num">1482</span>   <span class="ruby-identifier">user_authorized</span> = <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">try</span>(<span class="ruby-value">:is_admin?</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:audience</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value">:admins</span>) 
<span class="line-num">1483</span>   <span class="ruby-identifier">user_authoried</span> = <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">try</span>(<span class="ruby-value">:is_curator?</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:audience</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value">:curators</span>)
<span class="line-num">1484</span>   <span class="ruby-identifier">user_authoried</span> = <span class="ruby-identifier">logged_in?</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:audience</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value">:users</span>)
<span class="line-num">1485</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">test_enabled</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">user_authorized</span>
<span class="line-num">1486</span>     <span class="ruby-ivar">@feature_test</span> = <span class="ruby-identifier">test</span>
<span class="line-num">1487</span>     <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;feature_test&quot;</span>)
<span class="line-num">1488</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1489</span>     <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">1490</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1491</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-flexible_post_path">
            
              <b>flexible_post_path</b>(post, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-flexible_post_path" name="method-i-flexible_post_path" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-flexible_post_path_source')" id="l_method-i-flexible_post_path_source">show</a>
                

                

                
              </p>
              <div id="method-i-flexible_post_path_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1421</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">flexible_post_path</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1422</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">trip_path</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Trip</span>)
<span class="line-num">1423</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1424</span>     <span class="ruby-identifier">journal_post_path</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">1425</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Project&quot;</span>
<span class="line-num">1426</span>     <span class="ruby-identifier">project_journal_post_path</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">slug</span>, <span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">1427</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1428</span>     <span class="ruby-identifier">site_post_path</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">1429</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1430</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-flexible_post_url">
            
              <b>flexible_post_url</b>(post, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-flexible_post_url" name="method-i-flexible_post_url" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-flexible_post_url_source')" id="l_method-i-flexible_post_url_source">show</a>
                

                

                
              </p>
              <div id="method-i-flexible_post_url_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1432</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">flexible_post_url</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1433</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">trip_url</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Trip</span>)
<span class="line-num">1434</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1435</span>     <span class="ruby-identifier">journal_post_url</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">1436</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Project&quot;</span>
<span class="line-num">1437</span>     <span class="ruby-identifier">project_journal_post_url</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">slug</span>, <span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">1438</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1439</span>     <span class="ruby-identifier">site_post_url</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">1440</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1441</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-flickr_buddyicon">
            
              <b>flickr_buddyicon</b>(iconfarm,iconserver,nsid)
            
            <a href="../classes/ApplicationHelper.html#method-i-flickr_buddyicon" name="method-i-flickr_buddyicon" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-flickr_buddyicon_source')" id="l_method-i-flickr_buddyicon_source">show</a>
                

                

                
              </p>
              <div id="method-i-flickr_buddyicon_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">578</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">flickr_buddyicon</span>(<span class="ruby-identifier">iconfarm</span>,<span class="ruby-identifier">iconserver</span>,<span class="ruby-identifier">nsid</span>)
<span class="line-num">579</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">iconserver</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="line-num">580</span>     <span class="ruby-keyword">return</span> <span class="ruby-node">&quot;http://farm#{iconfarm}.staticflickr.com/#{iconserver}/buddyicons/#{nsid}.jpg&quot;</span>
<span class="line-num">581</span>   <span class="ruby-keyword">else</span>
<span class="line-num">582</span>     <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;http://www.flickr.com/images/buddyicon.gif&quot;</span>
<span class="line-num">583</span>   <span class="ruby-keyword">end</span>
<span class="line-num">584</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-formatted_error_sentence_for">
            
              <b>formatted_error_sentence_for</b>( record, attribute )
            
            <a href="../classes/ApplicationHelper.html#method-i-formatted_error_sentence_for" name="method-i-formatted_error_sentence_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-formatted_error_sentence_for_source')" id="l_method-i-formatted_error_sentence_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-formatted_error_sentence_for_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">335</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">formatted_error_sentence_for</span>( <span class="ruby-identifier">record</span>, <span class="ruby-identifier">attribute</span> )
<span class="line-num">336</span>   <span class="ruby-identifier">record</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span>
<span class="line-num">337</span>     <span class="ruby-identifier">t</span>(
<span class="line-num">338</span>       <span class="ruby-string">&quot;errors.format&quot;</span>,
<span class="line-num">339</span>       <span class="ruby-value">attribute:</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(
<span class="line-num">340</span>         <span class="ruby-node">&quot;activerecord.attributes.#{record.class.name.underscore}.#{attribute}&quot;</span>,
<span class="line-num">341</span>         <span class="ruby-value">default:</span> <span class="ruby-identifier">t</span>( <span class="ruby-identifier">attribute</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">attribute</span>)
<span class="line-num">342</span>       ),
<span class="line-num">343</span>       <span class="ruby-value">message:</span> <span class="ruby-identifier">error</span>,
<span class="line-num">344</span>     )
<span class="line-num">345</span>   }.<span class="ruby-identifier">to_sentence</span>.<span class="ruby-identifier">capitalize</span>
<span class="line-num">346</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-formatted_user_text">
            
              <b>formatted_user_text</b>(text, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-formatted_user_text" name="method-i-formatted_user_text" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-formatted_user_text_source')" id="l_method-i-formatted_user_text_source">show</a>
                

                

                
              </p>
              <div id="method-i-formatted_user_text_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">307</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">formatted_user_text</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">308</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">309</span> 
<span class="line-num">310</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">markdown</span>( <span class="ruby-identifier">text</span> ) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_simple_format</span>]
<span class="line-num">311</span>   
<span class="line-num">312</span>   <span class="ruby-comment"># make sure attributes are quoted correctly</span>
<span class="line-num">313</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/(&lt;.+?)(\w+)=[&#39;&quot;]([^&#39;&quot;]*?)[&#39;&quot;](&gt;)/</span>, <span class="ruby-string">&#39;\\1\\2=&quot;\\3&quot;\\4&#39;</span>)
<span class="line-num">314</span>   
<span class="line-num">315</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_simple_format</span>]
<span class="line-num">316</span>     <span class="ruby-comment"># Make sure P&#39;s don&#39;t get nested in P&#39;s</span>
<span class="line-num">317</span>     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/&lt;\\?p&gt;/</span>, <span class="ruby-string">&quot;\n\n&quot;</span>)
<span class="line-num">318</span>   <span class="ruby-keyword">end</span>
<span class="line-num">319</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">320</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">compact</span>(<span class="ruby-identifier">text</span>, <span class="ruby-value">:all_tags</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:compact</span>]
<span class="line-num">321</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">auto_link</span>(<span class="ruby-identifier">text</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:sanitize</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>).<span class="ruby-identifier">html_safe</span>
<span class="line-num">322</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">hyperlink_mentions</span>(<span class="ruby-identifier">text</span>)
<span class="line-num">323</span>   <span class="ruby-comment"># scrub to fix any encoding issues</span>
<span class="line-num">324</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">scrub</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/&lt;a /</span>, <span class="ruby-string">&#39;&lt;a rel=&quot;nofollow&quot; &#39;</span>)
<span class="line-num">325</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_simple_format</span>]
<span class="line-num">326</span>     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">simple_format_with_structure</span>( <span class="ruby-identifier">text</span>, <span class="ruby-value">sanitize:</span> <span class="ruby-keyword">false</span> )
<span class="line-num">327</span>   <span class="ruby-keyword">end</span>
<span class="line-num">328</span>   <span class="ruby-comment"># Ensure all tags are closed</span>
<span class="line-num">329</span>   <span class="ruby-identifier">text</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>( <span class="ruby-identifier">text</span> ).<span class="ruby-identifier">to_s</span>
<span class="line-num">330</span>   <span class="ruby-comment"># Remove empty paragraphs</span>
<span class="line-num">331</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>( <span class="ruby-string">&quot;&lt;p&gt;&lt;/p&gt;&quot;</span>, <span class="ruby-string">&quot;&quot;</span> )
<span class="line-num">332</span>   <span class="ruby-identifier">text</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">333</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-friend_button">
            
              <b>friend_button</b>(user, potential_friend, html_options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-friend_button" name="method-i-friend_button" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-friend_button_source')" id="l_method-i-friend_button_source">show</a>
                

                

                
              </p>
              <div id="method-i-friend_button_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num"> 62</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">friend_button</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">potential_friend</span>, <span class="ruby-identifier">html_options</span> = {})
<span class="line-num"> 63</span>   <span class="ruby-identifier">existing_relat</span> = <span class="ruby-identifier">user</span>.<span class="ruby-identifier">friendships</span>.<span class="ruby-identifier">where</span>( <span class="ruby-value">friend_id:</span> <span class="ruby-identifier">potential_friend</span>.<span class="ruby-identifier">id</span> ).<span class="ruby-identifier">first</span>
<span class="line-num"> 64</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">existing_relat</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">existing_relat</span>.<span class="ruby-identifier">trust?</span>
<span class="line-num"> 65</span>     <span class="ruby-comment"># friend button updates with following</span>
<span class="line-num"> 66</span>     <span class="ruby-identifier">friend_link</span> = <span class="ruby-identifier">link_to</span>(
<span class="line-num"> 67</span>       <span class="ruby-node">&quot;&lt;span class=&#39;glyphicon glyphicon-log-out&#39;&gt;&lt;/span&gt;&amp;nbsp;#{t( :follow_user, user: potential_friend.login )}&quot;</span>.<span class="ruby-identifier">html_safe</span>,
<span class="line-num"> 68</span>       <span class="ruby-identifier">relationship_url</span>( <span class="ruby-identifier">existing_relat</span>, <span class="ruby-string">&quot;relationship[following]&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span> ),
<span class="line-num"> 69</span>       <span class="ruby-identifier">html_options</span>.<span class="ruby-identifier">merge</span>(
<span class="line-num"> 70</span>         <span class="ruby-value">remote:</span> <span class="ruby-keyword">true</span>,
<span class="line-num"> 71</span>         <span class="ruby-value">datatype:</span> <span class="ruby-string">&quot;json&quot;</span>,
<span class="line-num"> 72</span>         <span class="ruby-value">method:</span> <span class="ruby-value">:put</span>,
<span class="line-num"> 73</span>         <span class="ruby-value">id:</span> <span class="ruby-identifier">dom_id</span>( <span class="ruby-identifier">potential_friend</span>, <span class="ruby-string">&quot;friend_link&quot;</span> ),
<span class="line-num"> 74</span>         <span class="ruby-value">class:</span> <span class="ruby-string">&quot;btn btn-primary btn-xs friend_link&quot;</span>,
<span class="line-num"> 75</span>         <span class="ruby-value">style:</span> <span class="ruby-identifier">existing_relat</span>.<span class="ruby-identifier">following?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;display:none&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>
<span class="line-num"> 76</span>       )
<span class="line-num"> 77</span>     )
<span class="line-num"> 78</span>     <span class="ruby-comment"># unfriend button removes following</span>
<span class="line-num"> 79</span>     <span class="ruby-identifier">unfriend_link</span> = <span class="ruby-identifier">link_to</span>(
<span class="line-num"> 80</span>       <span class="ruby-node">&quot;&lt;span class=&#39;glyphicon glyphicon-log-out&#39;&gt;&lt;/span&gt;&amp;nbsp;#{t( :stop_following_user, user: potential_friend.login )}&quot;</span>.<span class="ruby-identifier">html_safe</span>,
<span class="line-num"> 81</span>       <span class="ruby-identifier">relationship_url</span>( <span class="ruby-identifier">existing_relat</span>, <span class="ruby-string">&quot;relationship[following]&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span> ),
<span class="line-num"> 82</span>       <span class="ruby-identifier">html_options</span>.<span class="ruby-identifier">merge</span>(
<span class="line-num"> 83</span>         <span class="ruby-value">remote:</span> <span class="ruby-keyword">true</span>,
<span class="line-num"> 84</span>         <span class="ruby-value">datatype:</span> <span class="ruby-string">&quot;json&quot;</span>,
<span class="line-num"> 85</span>         <span class="ruby-value">method:</span> <span class="ruby-value">:put</span>,
<span class="line-num"> 86</span>         <span class="ruby-value">id:</span> <span class="ruby-identifier">dom_id</span>( <span class="ruby-identifier">potential_friend</span>, <span class="ruby-string">&quot;unfriend_link&quot;</span> ),
<span class="line-num"> 87</span>         <span class="ruby-value">class:</span> <span class="ruby-string">&quot;btn btn-primary btn-xs unfriend_link&quot;</span>,
<span class="line-num"> 88</span>         <span class="ruby-value">style:</span> <span class="ruby-identifier">existing_relat</span>.<span class="ruby-identifier">following?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;display:none&quot;</span>
<span class="line-num"> 89</span>       )
<span class="line-num"> 90</span>     )
<span class="line-num"> 91</span>   <span class="ruby-keyword">else</span>
<span class="line-num"> 92</span>     <span class="ruby-identifier">url_options</span> = {
<span class="line-num"> 93</span>       <span class="ruby-value">controller:</span> <span class="ruby-string">&quot;users&quot;</span>,
<span class="line-num"> 94</span>       <span class="ruby-value">action:</span> <span class="ruby-string">&quot;update&quot;</span>,
<span class="line-num"> 95</span>       <span class="ruby-value">id:</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">id</span>,
<span class="line-num"> 96</span>       <span class="ruby-value">format:</span> <span class="ruby-string">&quot;json&quot;</span>
<span class="line-num"> 97</span>     }
<span class="line-num"> 98</span>     <span class="ruby-identifier">friend_link</span> = <span class="ruby-identifier">link_to</span>(
<span class="line-num"> 99</span>       <span class="ruby-node">&quot;&lt;span class=&#39;glyphicon glyphicon-log-out&#39;&gt;&lt;/span&gt;&amp;nbsp;#{t( :follow_user, user: potential_friend.login )}&quot;</span>.<span class="ruby-identifier">html_safe</span>,
<span class="line-num">100</span>       <span class="ruby-identifier">url_options</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-value">friend_id:</span> <span class="ruby-identifier">potential_friend</span>.<span class="ruby-identifier">id</span> ),
<span class="line-num">101</span>       <span class="ruby-identifier">html_options</span>.<span class="ruby-identifier">merge</span>(
<span class="line-num">102</span>         <span class="ruby-value">remote:</span> <span class="ruby-keyword">true</span>,
<span class="line-num">103</span>         <span class="ruby-value">method:</span> <span class="ruby-value">:put</span>,
<span class="line-num">104</span>         <span class="ruby-value">datatype:</span> <span class="ruby-string">&quot;json&quot;</span>,
<span class="line-num">105</span>         <span class="ruby-value">id:</span> <span class="ruby-identifier">dom_id</span>( <span class="ruby-identifier">potential_friend</span>, <span class="ruby-string">&quot;friend_link&quot;</span> ),
<span class="line-num">106</span>         <span class="ruby-value">class:</span> <span class="ruby-string">&quot;btn btn-primary btn-xs friend_link&quot;</span>,
<span class="line-num">107</span>         <span class="ruby-value">style:</span> <span class="ruby-identifier">existing_relat</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">existing_relat</span>.<span class="ruby-identifier">following?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;display:none&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">108</span>       )
<span class="line-num">109</span>     )
<span class="line-num">110</span>     <span class="ruby-identifier">unfriend_link</span> = <span class="ruby-identifier">link_to</span>(
<span class="line-num">111</span>       <span class="ruby-node">&quot;&lt;span class=&#39;glyphicon glyphicon-log-out&#39;&gt;&lt;/span&gt;&amp;nbsp;#{t( :stop_following_user, user: potential_friend.login )}&quot;</span>.<span class="ruby-identifier">html_safe</span>,
<span class="line-num">112</span>       <span class="ruby-identifier">url_options</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-value">remove_friend_id:</span> <span class="ruby-identifier">potential_friend</span>.<span class="ruby-identifier">id</span> ),
<span class="line-num">113</span>       <span class="ruby-identifier">html_options</span>.<span class="ruby-identifier">merge</span>(
<span class="line-num">114</span>         <span class="ruby-value">remote:</span> <span class="ruby-keyword">true</span>,
<span class="line-num">115</span>         <span class="ruby-value">datatype:</span> <span class="ruby-string">&quot;json&quot;</span>,
<span class="line-num">116</span>         <span class="ruby-value">method:</span> <span class="ruby-value">:put</span>,
<span class="line-num">117</span>         <span class="ruby-value">id:</span> <span class="ruby-identifier">dom_id</span>( <span class="ruby-identifier">potential_friend</span>, <span class="ruby-string">&quot;unfriend_link&quot;</span> ),
<span class="line-num">118</span>         <span class="ruby-value">class:</span> <span class="ruby-string">&quot;btn btn-primary btn-xs unfriend_link&quot;</span>,
<span class="line-num">119</span>         <span class="ruby-value">style:</span> <span class="ruby-identifier">existing_relat</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">existing_relat</span>.<span class="ruby-identifier">following?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;display:none&quot;</span>
<span class="line-num">120</span>       )
<span class="line-num">121</span>     )
<span class="line-num">122</span>   <span class="ruby-keyword">end</span>
<span class="line-num">123</span>   <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:span</span>, (<span class="ruby-identifier">friend_link</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">unfriend_link</span>).<span class="ruby-identifier">html_safe</span>
<span class="line-num">124</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-geoprivacy_with_consistent_case">
            
              <b>geoprivacy_with_consistent_case</b>( geoprivacy )
            
            <a href="../classes/ApplicationHelper.html#method-i-geoprivacy_with_consistent_case" name="method-i-geoprivacy_with_consistent_case" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Workaround for our inconsistent i18n keys</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-geoprivacy_with_consistent_case_source')" id="l_method-i-geoprivacy_with_consistent_case_source">show</a>
                

                

                
              </p>
              <div id="method-i-geoprivacy_with_consistent_case_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1615</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">geoprivacy_with_consistent_case</span>( <span class="ruby-identifier">geoprivacy</span> )
<span class="line-num">1616</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">geoprivacy</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;obscured&quot;</span>
<span class="line-num">1617</span>     <span class="ruby-identifier">t</span>( <span class="ruby-node">&quot;#{geoprivacy}_&quot;</span> )
<span class="line-num">1618</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1619</span>     <span class="ruby-identifier">t</span>( <span class="ruby-value">:obscured</span> )
<span class="line-num">1620</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1621</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-google_maps_js">
            
              <b>google_maps_js</b>(options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-google_maps_js" name="method-i-google_maps_js" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-google_maps_js_source')" id="l_method-i-google_maps_js_source">show</a>
                

                

                
              </p>
              <div id="method-i-google_maps_js_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1378</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">google_maps_js</span>(<span class="ruby-identifier">options</span> = {})
<span class="line-num">1379</span>   <span class="ruby-identifier">libraries</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:libraries</span>] <span class="ruby-operator">||</span> []
<span class="line-num">1380</span>   <span class="ruby-identifier">version</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>.<span class="ruby-identifier">development?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;weekly&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;3.48&quot;</span>
<span class="line-num">1381</span>   <span class="ruby-identifier">params</span> = <span class="ruby-node">&quot;v=#{version}&amp;key=#{CONFIG.google.browser_api_key}&quot;</span>
<span class="line-num">1382</span>   <span class="ruby-identifier">params</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&amp;libraries=#{libraries.join(&#39;,&#39;)}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">libraries</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">1383</span>   <span class="ruby-node">&quot;&lt;script type=&#39;text/javascript&#39; src=&#39;http#{&#39;s&#39; if request.ssl?}://maps.google.com/maps/api/js?#{params}&#39;&gt;&lt;/script&gt;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1384</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-google_static_map_for_observation_url">
            
              <b>google_static_map_for_observation_url</b>(o, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-google_static_map_for_observation_url" name="method-i-google_static_map_for_observation_url" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-google_static_map_for_observation_url_source')" id="l_method-i-google_static_map_for_observation_url_source">show</a>
                

                

                
              </p>
              <div id="method-i-google_static_map_for_observation_url_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">895</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">google_static_map_for_observation_url</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">896</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">google</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">google</span>.<span class="ruby-identifier">browser_api_key</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">897</span>   <span class="ruby-identifier">url_for_options</span> = {
<span class="line-num">898</span>     <span class="ruby-value">:host</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;maps.google.com&#39;</span>,
<span class="line-num">899</span>     <span class="ruby-value">:controller</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;maps/api/staticmap&#39;</span>,
<span class="line-num">900</span>     <span class="ruby-value">:center</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{o.latitude},#{o.longitude}&quot;</span>,
<span class="line-num">901</span>     <span class="ruby-value">:zoom</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">map_scale</span> <span class="ruby-operator">||</span> <span class="ruby-value">7</span>,
<span class="line-num">902</span>     <span class="ruby-value">:size</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;200x200&#39;</span>,
<span class="line-num">903</span>     <span class="ruby-value">:markers</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;color:0x#{iconic_taxon_color(o.iconic_taxon_id)}|#{o.latitude},#{o.longitude}&quot;</span>,
<span class="line-num">904</span>     <span class="ruby-value">:port</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>,
<span class="line-num">905</span>     <span class="ruby-value">:key</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">google</span>.<span class="ruby-identifier">browser_api_key</span>
<span class="line-num">906</span>   }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
<span class="line-num">907</span>   <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url_for_options</span>)
<span class="line-num">908</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-has_t-3F">
            
              <b>has_t?</b>(*args)
            
            <a href="../classes/ApplicationHelper.html#method-i-has_t-3F" name="method-i-has_t-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-has_t-3F_source')" id="l_method-i-has_t-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-has_t-3F_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1504</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">has_t?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">1505</span>   <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">has_t?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">1506</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-helptip">
            
              <b>helptip</b>(text, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-helptip" name="method-i-helptip" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-helptip_source')" id="l_method-i-helptip_source">show</a>
                

                

                
              </p>
              <div id="method-i-helptip_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">593</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">helptip</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">594</span>   <span class="ruby-identifier">tip_id</span> = <span class="ruby-node">&quot;tip_#{serial_id}&quot;</span>
<span class="line-num">595</span>   <span class="ruby-identifier">html</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>, <span class="ruby-identifier">text</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{options[:class]} #{tip_id}_target helptip helptiptext&quot;</span>, <span class="ruby-value">:rel</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;##{tip_id}&quot;</span>)
<span class="line-num">596</span>   <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">tip_id</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;display:none&quot;</span>)
<span class="line-num">597</span>   <span class="ruby-identifier">html</span>
<span class="line-num">598</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-helptip_for">
            
              <b>helptip_for</b>(id, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-helptip_for" name="method-i-helptip_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-helptip_for_source')" id="l_method-i-helptip_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-helptip_for_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">586</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">helptip_for</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">587</span>   <span class="ruby-identifier">tip_id</span> = <span class="ruby-node">&quot;#{id}_tip&quot;</span>
<span class="line-num">588</span>   <span class="ruby-identifier">html</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>, <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{options[:class]} #{tip_id}_target helptip&quot;</span>, <span class="ruby-value">:rel</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;##{tip_id}&quot;</span>)
<span class="line-num">589</span>   <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">tip_id</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;display:none&quot;</span>)
<span class="line-num">590</span>   <span class="ruby-identifier">concat</span> <span class="ruby-identifier">html</span>
<span class="line-num">591</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-hidden_fields_for_params">
            
              <b>hidden_fields_for_params</b>(options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-hidden_fields_for_params" name="method-i-hidden_fields_for_params" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-hidden_fields_for_params_source')" id="l_method-i-hidden_fields_for_params_source">show</a>
                

                

                
              </p>
              <div id="method-i-hidden_fields_for_params_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">254</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">hidden_fields_for_params</span>(<span class="ruby-identifier">options</span> = {})
<span class="line-num">255</span>   <span class="ruby-identifier">new_params</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">query_parameters</span>.<span class="ruby-identifier">clone</span>
<span class="line-num">256</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">without</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:without</span>)
<span class="line-num">257</span>     <span class="ruby-identifier">without</span> = [<span class="ruby-identifier">without</span>] <span class="ruby-keyword">unless</span> <span class="ruby-identifier">without</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
<span class="line-num">258</span>     <span class="ruby-identifier">without</span>.<span class="ruby-identifier">map!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_s</span>)
<span class="line-num">259</span>     <span class="ruby-identifier">new_params</span>.<span class="ruby-identifier">reject!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">without</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">k</span>) }
<span class="line-num">260</span>   <span class="ruby-keyword">end</span>
<span class="line-num">261</span>   
<span class="line-num">262</span>   <span class="ruby-identifier">new_params</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">options</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">empty?</span>
<span class="line-num">263</span>   
<span class="line-num">264</span>   <span class="ruby-identifier">html</span> = <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">265</span>   <span class="ruby-identifier">new_params</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
<span class="line-num">266</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
<span class="line-num">267</span>       <span class="ruby-identifier">value</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
<span class="line-num">268</span>         <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">hidden_field_tag</span> <span class="ruby-node">&quot;#{key}[]&quot;</span>, <span class="ruby-identifier">v</span>
<span class="line-num">269</span>       <span class="ruby-keyword">end</span>
<span class="line-num">270</span>     <span class="ruby-keyword">else</span>
<span class="line-num">271</span>       <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">hidden_field_tag</span> <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>
<span class="line-num">272</span>     <span class="ruby-keyword">end</span>
<span class="line-num">273</span>   <span class="ruby-keyword">end</span>
<span class="line-num">274</span>   <span class="ruby-identifier">html</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">275</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-html_attributize">
            
              <b>html_attributize</b>(txt)
            
            <a href="../classes/ApplicationHelper.html#method-i-html_attributize" name="method-i-html_attributize" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-html_attributize_source')" id="l_method-i-html_attributize_source">show</a>
                

                

                
              </p>
              <div id="method-i-html_attributize_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">495</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">html_attributize</span>(<span class="ruby-identifier">txt</span>)
<span class="line-num">496</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">txt</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">txt</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">497</span>   <span class="ruby-identifier">strip_tags</span>(<span class="ruby-identifier">txt</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;&quot;&#39;</span>, <span class="ruby-string">&quot;&#39;&quot;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-string">&quot; &quot;</span>)
<span class="line-num">498</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-hyperlink_mentions">
            
              <b>hyperlink_mentions</b>(text)
            
            <a href="../classes/ApplicationHelper.html#method-i-hyperlink_mentions" name="method-i-hyperlink_mentions" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-hyperlink_mentions_source')" id="l_method-i-hyperlink_mentions_source">show</a>
                

                

                
              </p>
              <div id="method-i-hyperlink_mentions_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1508</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">hyperlink_mentions</span>(<span class="ruby-identifier">text</span>)
<span class="line-num">1509</span>   <span class="ruby-identifier">linked_text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">dup</span>
<span class="line-num">1510</span>   <span class="ruby-comment"># link the longer logins first, to prevent mistakes when</span>
<span class="line-num">1511</span>   <span class="ruby-comment"># one username is a substring of another username</span>
<span class="line-num">1512</span>   <span class="ruby-identifier">linked_text</span>.<span class="ruby-identifier">mentioned_users</span>.<span class="ruby-identifier">sort_by</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">login</span>.<span class="ruby-identifier">length</span> }.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span>
<span class="line-num">1513</span>     <span class="ruby-comment"># link `@login` when @ is preceded by a word break but isn&#39;t preceded by &quot;&gt;</span>
<span class="line-num">1514</span>     <span class="ruby-identifier">linked_text</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/(^|(?&lt;!&quot;&gt;))@#{ u.login }/</span>, <span class="ruby-node">&quot;\\1#{link_to(&quot;@#{ u.login }&quot;, person_by_login_url(u.login))}&quot;</span>)
<span class="line-num">1515</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1516</span>   <span class="ruby-identifier">linked_text</span>
<span class="line-num">1517</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-iconic_taxon_color_for">
            
              <b>iconic_taxon_color_for</b>(taxon)
            
            <a href="../classes/ApplicationHelper.html#method-i-iconic_taxon_color_for" name="method-i-iconic_taxon_color_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-iconic_taxon_color_for_source')" id="l_method-i-iconic_taxon_color_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-iconic_taxon_color_for_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">873</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">iconic_taxon_color_for</span>(<span class="ruby-identifier">taxon</span>)
<span class="line-num">874</span>   <span class="ruby-identifier">iconic_taxon_colors</span>[<span class="ruby-identifier">taxon</span>.<span class="ruby-identifier">iconic_taxon_id</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;#333333&#39;</span>
<span class="line-num">875</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-iconic_taxon_colors">
            
              <b>iconic_taxon_colors</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-iconic_taxon_colors" name="method-i-iconic_taxon_colors" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-iconic_taxon_colors_source')" id="l_method-i-iconic_taxon_colors_source">show</a>
                

                

                
              </p>
              <div id="method-i-iconic_taxon_colors_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">877</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">iconic_taxon_colors</span>
<span class="line-num">878</span>   {
<span class="line-num">879</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Animalia&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#1E90FF&#39;</span>,
<span class="line-num">880</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Amphibia&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#1E90FF&#39;</span>,
<span class="line-num">881</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Reptilia&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#1E90FF&#39;</span>,
<span class="line-num">882</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Aves&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#1E90FF&#39;</span>,
<span class="line-num">883</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Mammalia&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#1E90FF&#39;</span>,
<span class="line-num">884</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Actinopterygii&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#1E90FF&#39;</span>,
<span class="line-num">885</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Mollusca&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#FF4500&#39;</span>,
<span class="line-num">886</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Arachnida&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#FF4500&#39;</span>,
<span class="line-num">887</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Insecta&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#FF4500&#39;</span>,
<span class="line-num">888</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Fungi&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#FF1493&#39;</span>,
<span class="line-num">889</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Plantae&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#73AC13&#39;</span>,
<span class="line-num">890</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Protozoa&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#691776&#39;</span>,
<span class="line-num">891</span>     <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_NAME</span>[<span class="ruby-string">&#39;Chromista&#39;</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;#993300&#39;</span>
<span class="line-num">892</span>   }
<span class="line-num">893</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-id_for">
            
              <b>id_for</b>(obj)
            
            <a href="../classes/ApplicationHelper.html#method-i-id_for" name="method-i-id_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Generate an id for an object for us in views, e.g. an observation with id  4 would be “observation-4”</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-id_for_source')" id="l_method-i-id_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-id_for_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">133</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">id_for</span>(<span class="ruby-identifier">obj</span>)
<span class="line-num">134</span>   <span class="ruby-node">&quot;#{obj.class.name.underscore}-#{obj.id}&quot;</span>
<span class="line-num">135</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-image_and_content">
            
              <b>image_and_content</b>(image, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-image_and_content" name="method-i-image_and_content" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-image_and_content_source')" id="l_method-i-image_and_content_source">show</a>
                

                

                
              </p>
              <div id="method-i-image_and_content_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">439</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">image_and_content</span>(<span class="ruby-identifier">image</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">440</span>   <span class="ruby-identifier">image_size</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:image_size</span>) <span class="ruby-operator">||</span> <span class="ruby-value">48</span>
<span class="line-num">441</span>   <span class="ruby-identifier">content</span> = <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">442</span>   <span class="ruby-identifier">image_wrapper</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">image</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;image&quot;</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;width: #{image_size}px; position: absolute; left: 0; top: 0; text-align:center;&quot;</span>)
<span class="line-num">443</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] = <span class="ruby-node">&quot;image_and_content #{options[:class]}&quot;</span>.<span class="ruby-identifier">strip</span>
<span class="line-num">444</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:style</span>] = <span class="ruby-node">&quot;#{options[:style]}; padding-left: #{image_size.to_i + 10}px; position: relative;&quot;</span>
<span class="line-num">445</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:style</span>] <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;min-height: #{image_size}px;&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:square</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
<span class="line-num">446</span>   <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">image_wrapper</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">content</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">447</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-image_url">
            
              <b>image_url</b>( source, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-image_url" name="method-i-image_url" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-image_url_source')" id="l_method-i-image_url_source">show</a>
                

                

                
              </p>
              <div id="method-i-image_url_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">509</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">image_url</span>( <span class="ruby-identifier">source</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">510</span>   <span class="ruby-comment"># Here FakeView is necessary again for situations where this gets called</span>
<span class="line-num">511</span>   <span class="ruby-comment"># outside of a context with the normal URL and asset helpers</span>
<span class="line-num">512</span>   <span class="ruby-identifier">abs_path</span> = <span class="ruby-identifier">source</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%r{^/}</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">source</span> <span class="ruby-operator">:</span> <span class="ruby-constant">FakeView</span>.<span class="ruby-identifier">asset_path</span>( <span class="ruby-identifier">source</span> ).<span class="ruby-identifier">to_s</span>
<span class="line-num">513</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">abs_path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\Ahttp/</span>
<span class="line-num">514</span>     <span class="ruby-identifier">the_root_url</span> = <span class="ruby-keyword">begin</span>
<span class="line-num">515</span>       <span class="ruby-identifier">root_url</span>
<span class="line-num">516</span>     <span class="ruby-keyword">rescue</span> <span class="ruby-constant">StandardError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
<span class="line-num">517</span>       <span class="ruby-comment"># If this method gets called outside of the context of a controller, url</span>
<span class="line-num">518</span>       <span class="ruby-comment"># helpers like root_url may not be available, so we might need to fall</span>
<span class="line-num">519</span>       <span class="ruby-comment"># back to FakeView. Note that rescuing ActionView::Template::Error</span>
<span class="line-num">520</span>       <span class="ruby-comment"># doesn&#39;t seem to work here.</span>
<span class="line-num">521</span>       <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/root_url/</span>
<span class="line-num">522</span> 
<span class="line-num">523</span>       <span class="ruby-constant">FakeView</span>.<span class="ruby-identifier">root_url</span>
<span class="line-num">524</span>     <span class="ruby-keyword">end</span>
<span class="line-num">525</span>     <span class="ruby-identifier">abs_path</span> = <span class="ruby-identifier">uri_join</span>( <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_url</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@site</span>&amp;.<span class="ruby-identifier">url</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">the_root_url</span>, <span class="ruby-identifier">abs_path</span> ).<span class="ruby-identifier">to_s</span>
<span class="line-num">526</span>   <span class="ruby-keyword">end</span>
<span class="line-num">527</span>   <span class="ruby-identifier">abs_path</span>
<span class="line-num">528</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-in_format">
            
              <b>in_format</b>(format)
            
            <a href="../classes/ApplicationHelper.html#method-i-in_format" name="method-i-in_format" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-in_format_source')" id="l_method-i-in_format_source">show</a>
                

                

                
              </p>
              <div id="method-i-in_format_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">397</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">in_format</span>(<span class="ruby-identifier">format</span>)
<span class="line-num">398</span>   <span class="ruby-identifier">old_formats</span> = <span class="ruby-identifier">formats</span>
<span class="line-num">399</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">formats</span> = [<span class="ruby-identifier">format</span>]
<span class="line-num">400</span>   <span class="ruby-keyword">yield</span>
<span class="line-num">401</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">formats</span> = <span class="ruby-identifier">old_formats</span>
<span class="line-num">402</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-is_admin-3F">
            
              <b>is_admin?</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-is_admin-3F" name="method-i-is_admin-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-is_admin-3F_source')" id="l_method-i-is_admin-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-is_admin-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">149</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">is_admin?</span>
<span class="line-num">150</span>   <span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:user_signed_in?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logged_in?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:current_user</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">is_admin?</span>
<span class="line-num">151</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-is_curator-3F">
            
              <b>is_curator?</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-is_curator-3F" name="method-i-is_curator-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-is_curator-3F_source')" id="l_method-i-is_curator-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-is_curator-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">157</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">is_curator?</span>
<span class="line-num">158</span>   <span class="ruby-identifier">logged_in?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">is_curator?</span>
<span class="line-num">159</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-is_me-3F">
            
              <b>is_me?</b>(user = @selected_user, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-is_me-3F" name="method-i-is_me-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-is_me-3F_source')" id="l_method-i-is_me-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-is_me-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">137</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">is_me?</span>(<span class="ruby-identifier">user</span> = <span class="ruby-ivar">@selected_user</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">138</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:user_signed_in?</span>)
<span class="line-num">139</span>     <span class="ruby-identifier">logged_in?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">user</span>.<span class="ruby-identifier">try</span>(<span class="ruby-value">:id</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">id</span>)
<span class="line-num">140</span>   <span class="ruby-keyword">else</span>
<span class="line-num">141</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:current_user</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">user</span>.<span class="ruby-identifier">try</span>(<span class="ruby-value">:id</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:current_user</span>].<span class="ruby-identifier">id</span>)
<span class="line-num">142</span>   <span class="ruby-keyword">end</span>
<span class="line-num">143</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-is_not_me-3F">
            
              <b>is_not_me?</b>(user = @selected_user)
            
            <a href="../classes/ApplicationHelper.html#method-i-is_not_me-3F" name="method-i-is_not_me-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-is_not_me-3F_source')" id="l_method-i-is_not_me-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-is_not_me-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">145</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">is_not_me?</span>(<span class="ruby-identifier">user</span> = <span class="ruby-ivar">@selected_user</span>)
<span class="line-num">146</span>   <span class="ruby-operator">!</span><span class="ruby-identifier">is_me?</span>(<span class="ruby-identifier">user</span>)
<span class="line-num">147</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-is_site_admin-3F">
            
              <b>is_site_admin?</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-is_site_admin-3F" name="method-i-is_site_admin-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-is_site_admin-3F_source')" id="l_method-i-is_site_admin-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-is_site_admin-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">153</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">is_site_admin?</span>
<span class="line-num">154</span>   <span class="ruby-identifier">logged_in?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@site</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">is_site_admin_of?</span>( <span class="ruby-ivar">@site</span> )
<span class="line-num">155</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-json_escape">
            
              <b>json_escape</b>(s)
            
            <a href="../classes/ApplicationHelper.html#method-i-json_escape" name="method-i-json_escape" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p><a href="http://jfire.io/blog/2012/04/30/how-to-securely-bootstrap-json-in-a-rails-view">jfire.io/blog/2012/04/30/how-to-securely-bootstrap-json-in-a-rails-view</a>/</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-json_escape_source')" id="l_method-i-json_escape_source">show</a>
                

                

                
              </p>
              <div id="method-i-json_escape_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1499</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">json_escape</span>(<span class="ruby-identifier">s</span>)
<span class="line-num">1500</span>   <span class="ruby-identifier">result</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-string">&#39;\/&#39;</span>)
<span class="line-num">1501</span>   <span class="ruby-identifier">s</span>.<span class="ruby-identifier">html_safe?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">result</span>
<span class="line-num">1502</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-leaflet_js">
            
              <b>leaflet_js</b>(options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-leaflet_js" name="method-i-leaflet_js" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-leaflet_js_source')" id="l_method-i-leaflet_js_source">show</a>
                

                

                
              </p>
              <div id="method-i-leaflet_js_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1386</span>   <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">leaflet_js</span>(<span class="ruby-identifier">options</span> = {})
<span class="line-num">1387</span>     <span class="ruby-identifier">h</span> = <span class="ruby-identifier">&lt;&lt;-HTML</span>
<span class="line-num">1388</span> <span class="ruby-value">      #{ stylesheet_link_tag &#39;leaflet.css&#39; }
<span class="line-num">1389</span>       #{ javascript_include_tag &#39;leaflet.js&#39; }
<span class="line-num">1390</span> </span><span class="ruby-identifier">    HTML</span>
<span class="line-num">1391</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:draw</span>]
<span class="line-num">1392</span>       <span class="ruby-identifier">h</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">&lt;&lt;-HTML</span>
<span class="line-num">1393</span> <span class="ruby-value">        #{ stylesheet_link_tag(&#39;leaflet.draw/leaflet.draw.css&#39;) }
<span class="line-num">1394</span>         &lt;!--[if lte IE 8]&gt;
<span class="line-num">1395</span>             #{ stylesheet_link_tag(&#39;leaflet.draw/leaflet.draw.ie.css&#39;) }
<span class="line-num">1396</span>         &lt;![endif]--&gt;
<span class="line-num">1397</span>         #{ javascript_include_tag(&#39;leaflet.draw/leaflet.draw.js&#39;) }
<span class="line-num">1398</span> </span><span class="ruby-identifier">      HTML</span>
<span class="line-num">1399</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1400</span>     <span class="ruby-identifier">raw</span> <span class="ruby-identifier">h</span>
<span class="line-num">1401</span>   <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-license_name">
            
              <b>license_name</b>( license )
            
            <a href="../classes/ApplicationHelper.html#method-i-license_name" name="method-i-license_name" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-license_name_source')" id="l_method-i-license_name_source">show</a>
                

                

                
              </p>
              <div id="method-i-license_name_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1000</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">license_name</span>( <span class="ruby-identifier">license</span> )
<span class="line-num">1001</span>   <span class="ruby-constant">Shared</span><span class="ruby-operator">::</span><span class="ruby-constant">LicenseModule</span>.<span class="ruby-identifier">license_name_for_code</span>( <span class="ruby-identifier">license</span> )
<span class="line-num">1002</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to">
            
              <b>link_to</b>(*args, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to" name="method-i-link_to" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_source')" id="l_method-i-link_to_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">672</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">673</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block_given?</span>
<span class="line-num">674</span>     <span class="ruby-identifier">body</span>, <span class="ruby-identifier">url</span>, <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>
<span class="line-num">675</span>     <span class="ruby-identifier">url_candidate</span> = <span class="ruby-keyword">begin</span>
<span class="line-num">676</span>       <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url</span>)
<span class="line-num">677</span>     <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
<span class="line-num">678</span>       <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/invalid byte sequence/</span>
<span class="line-num">679</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">url</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
<span class="line-num">680</span>         <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url_for</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-string">&#39;UTF-8&#39;</span>))
<span class="line-num">681</span>       <span class="ruby-keyword">else</span>
<span class="line-num">682</span>         <span class="ruby-identifier">new_pieces</span> = {}
<span class="line-num">683</span>         <span class="ruby-identifier">url</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">new_pieces</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-string">&#39;UTF-8&#39;</span>)}
<span class="line-num">684</span>         <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">new_pieces</span>)
<span class="line-num">685</span>       <span class="ruby-keyword">end</span>
<span class="line-num">686</span>     <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
<span class="line-num">687</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/sound_path/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">url</span>.<span class="ruby-identifier">is_a?</span>( <span class="ruby-constant">Sound</span> )
<span class="line-num">688</span>         <span class="ruby-identifier">url_for</span>( <span class="ruby-identifier">url</span>.<span class="ruby-identifier">becomes</span>( <span class="ruby-constant">Sound</span> ) )
<span class="line-num">689</span>       <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/photo_path/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">url</span>.<span class="ruby-identifier">is_a?</span>( <span class="ruby-constant">Photo</span> )
<span class="line-num">690</span>         <span class="ruby-identifier">url_for</span>( <span class="ruby-identifier">url</span>.<span class="ruby-identifier">becomes</span>( <span class="ruby-constant">Photo</span> ) )
<span class="line-num">691</span>       <span class="ruby-keyword">else</span>
<span class="line-num">692</span>         <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
<span class="line-num">693</span>       <span class="ruby-keyword">end</span>
<span class="line-num">694</span>     <span class="ruby-keyword">end</span>
<span class="line-num">695</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">url_candidate</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\?/</span>
<span class="line-num">696</span>       <span class="ruby-identifier">options</span> <span class="ruby-operator">||=</span> {}
<span class="line-num">697</span>       <span class="ruby-identifier">options</span>[<span class="ruby-value">:rel</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;nofollow&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:rel</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/nofollow/</span>
<span class="line-num">698</span>     <span class="ruby-keyword">end</span>
<span class="line-num">699</span>     <span class="ruby-keyword">super</span>(<span class="ruby-identifier">body</span>, <span class="ruby-identifier">url_candidate</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">700</span>   <span class="ruby-keyword">else</span>
<span class="line-num">701</span>     <span class="ruby-keyword">super</span>
<span class="line-num">702</span>   <span class="ruby-keyword">end</span>
<span class="line-num">703</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to_dialog">
            
              <b>link_to_dialog</b>(title, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to_dialog" name="method-i-link_to_dialog" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_dialog_source')" id="l_method-i-link_to_dialog_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_dialog_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">213</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to_dialog</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">214</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:title</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">title</span>
<span class="line-num">215</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:modal</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword">true</span>
<span class="line-num">216</span>   <span class="ruby-identifier">id</span> = <span class="ruby-identifier">title</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\W/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">underscore</span>
<span class="line-num">217</span>   <span class="ruby-identifier">dialog</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;dialog&quot;</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;display:none&quot;</span>, <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{id}_dialog&quot;</span>)
<span class="line-num">218</span>   <span class="ruby-identifier">link_options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:link</span>) <span class="ruby-operator">||</span> {}
<span class="line-num">219</span>   <span class="ruby-identifier">link</span> = <span class="ruby-identifier">link_to_function</span>(<span class="ruby-identifier">title</span>, <span class="ruby-node">&quot;$(&#39;##{id}_dialog&#39;).dialog(#{options.to_json})&quot;</span>, <span class="ruby-identifier">link_options</span>)
<span class="line-num">220</span>   <span class="ruby-identifier">dialog</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">link</span>
<span class="line-num">221</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to_function">
            
              <b>link_to_function</b>(name, function, html_options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to_function" name="method-i-link_to_function" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>TODO: This is removed in Rails 4, but we use it hundrends of times so I recurrected it. Ideally we&#39;d update the places that use this method</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_function_source')" id="l_method-i-link_to_function_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_function_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">173</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to_function</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">function</span>, <span class="ruby-identifier">html_options</span> = {})
<span class="line-num">174</span>   <span class="ruby-identifier">onclick</span> = <span class="ruby-node">&quot;#{&quot;#{html_options[:onclick]}; &quot; if html_options[:onclick]}#{function}; return false;&quot;</span>
<span class="line-num">175</span>   <span class="ruby-identifier">href</span> = <span class="ruby-identifier">html_options</span>[<span class="ruby-value">:href</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&quot;#&quot;</span>
<span class="line-num">176</span>   <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:a</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">html_options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">href:</span> <span class="ruby-identifier">href</span>, <span class="ruby-value">onclick:</span> <span class="ruby-identifier">onclick</span>))
<span class="line-num">177</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to_taxon">
            
              <b>link_to_taxon</b>(taxon, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to_taxon" name="method-i-link_to_taxon" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_taxon_source')" id="l_method-i-link_to_taxon_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_taxon_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">658</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to_taxon</span>(<span class="ruby-identifier">taxon</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">659</span>   <span class="ruby-identifier">iconic_taxon</span> = <span class="ruby-constant">Taxon</span><span class="ruby-operator">::</span><span class="ruby-constant">ICONIC_TAXA_BY_ID</span>[<span class="ruby-identifier">taxon</span>.<span class="ruby-identifier">iconic_taxon_id</span>]
<span class="line-num">660</span>   <span class="ruby-identifier">iconic_taxon_name</span> = <span class="ruby-identifier">iconic_taxon</span>.<span class="ruby-identifier">try</span>(<span class="ruby-value">:name</span>) <span class="ruby-operator">||</span> <span class="ruby-string">&#39;Unknown&#39;</span>
<span class="line-num">661</span>   <span class="ruby-identifier">url</span> = <span class="ruby-identifier">taxon_path</span>(<span class="ruby-identifier">taxon</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:url_params</span>) <span class="ruby-operator">||</span> {})
<span class="line-num">662</span>   <span class="ruby-identifier">taxon_name</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:sciname</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">taxon</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">default_taxon_name</span>(<span class="ruby-identifier">taxon</span>)
<span class="line-num">663</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:sciname</span>]
<span class="line-num">664</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] = <span class="ruby-node">&quot;#{options[:class]} sciname&quot;</span>.<span class="ruby-identifier">strip</span>
<span class="line-num">665</span>   <span class="ruby-keyword">end</span>
<span class="line-num">666</span>   <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:span</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;taxon #{iconic_taxon_name} #{taxon.rank}&quot;</span> <span class="ruby-keyword">do</span>
<span class="line-num">667</span>     <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">iconic_taxon_image</span>(<span class="ruby-identifier">taxon</span>, <span class="ruby-value">:size</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">15</span>), <span class="ruby-identifier">url</span>, <span class="ruby-identifier">options</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span>
<span class="line-num">668</span>     <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">taxon_name</span>, <span class="ruby-identifier">url</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">669</span>   <span class="ruby-keyword">end</span>
<span class="line-num">670</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to_tip">
            
              <b>link_to_tip</b>(title, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to_tip" name="method-i-link_to_tip" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_tip_source')" id="l_method-i-link_to_tip_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_tip_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">223</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to_tip</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">224</span>   <span class="ruby-identifier">id</span> = <span class="ruby-identifier">title</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\W/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">underscore</span>
<span class="line-num">225</span>   <span class="ruby-identifier">dialog</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;tip&quot;</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;display:none&quot;</span>, <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{id}_tip&quot;</span>)
<span class="line-num">226</span>   <span class="ruby-identifier">link_options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:link</span>) <span class="ruby-operator">||</span> {}
<span class="line-num">227</span>   <span class="ruby-identifier">data</span> = (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:tip</span>) <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">merge</span>(<span class="ruby-value">tip:</span> <span class="ruby-node">&quot;##{id}_tip&quot;</span>)
<span class="line-num">228</span>   <span class="ruby-identifier">data</span>[<span class="ruby-string">&#39;tip-options&#39;</span>] = {
<span class="line-num">229</span>     <span class="ruby-value">content:</span> {
<span class="line-num">230</span>       <span class="ruby-value">text:</span> <span class="ruby-node">&quot;##{id}_tip&quot;</span>
<span class="line-num">231</span>     },
<span class="line-num">232</span>     <span class="ruby-value">show:</span> {<span class="ruby-value">event:</span> <span class="ruby-string">&#39;click&#39;</span>},
<span class="line-num">233</span>     <span class="ruby-value">hide:</span> {<span class="ruby-value">event:</span> <span class="ruby-string">&#39;click unfocus&#39;</span>}
<span class="line-num">234</span>   }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:tip_options</span>) <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">to_json</span>
<span class="line-num">235</span>   <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">data:</span> <span class="ruby-identifier">data</span>)
<span class="line-num">236</span>   <span class="ruby-identifier">link</span> = <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">title</span>, <span class="ruby-string">&quot;#&quot;</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">onclick:</span> <span class="ruby-string">&quot;javascript:return false;&quot;</span>))
<span class="line-num">237</span>   <span class="ruby-identifier">dialog</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">link</span>
<span class="line-num">238</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to_toggle">
            
              <b>link_to_toggle</b>(link_text, target_selector, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to_toggle" name="method-i-link_to_toggle" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_toggle_source')" id="l_method-i-link_to_toggle_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_toggle_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">179</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to_toggle</span>(<span class="ruby-identifier">link_text</span>, <span class="ruby-identifier">target_selector</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">180</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&#39;&#39;</span>
<span class="line-num">181</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">+=</span> <span class="ruby-string">&#39; togglelink&#39;</span>
<span class="line-num">182</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:rel</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">target_selector</span>
<span class="line-num">183</span>   <span class="ruby-identifier">link_to_function</span> <span class="ruby-identifier">link_text</span>,
<span class="line-num">184</span>     <span class="ruby-node">&quot;$(&#39;#{target_selector}&#39;).toggle(); $(this).toggleClass(&#39;open&#39;)&quot;</span>,
<span class="line-num">185</span>     <span class="ruby-identifier">options</span>
<span class="line-num">186</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to_toggle_box">
            
              <b>link_to_toggle_box</b>(txt, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to_toggle_box" name="method-i-link_to_toggle_box" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_toggle_box_source')" id="l_method-i-link_to_toggle_box_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_toggle_box_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">188</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to_toggle_box</span>(<span class="ruby-identifier">txt</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">189</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&#39;&#39;</span>
<span class="line-num">190</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">+=</span> <span class="ruby-string">&#39; togglelink&#39;</span>
<span class="line-num">191</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">open</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:open</span>)
<span class="line-num">192</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">+=</span> <span class="ruby-string">&#39; open&#39;</span>
<span class="line-num">193</span>   <span class="ruby-keyword">end</span>
<span class="line-num">194</span>   <span class="ruby-identifier">link</span> = <span class="ruby-identifier">link_to_function</span>(<span class="ruby-identifier">txt</span>, <span class="ruby-string">&quot;$(this).siblings(&#39;.togglebox&#39;).toggle(); $(this).toggleClass(&#39;open&#39;)&quot;</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">195</span>   <span class="ruby-identifier">hidden</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">open</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;display:none&quot;</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;togglebox&quot;</span>)
<span class="line-num">196</span>   <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:div</span>, <span class="ruby-identifier">link</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hidden</span>
<span class="line-num">197</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-link_to_toggle_menu">
            
              <b>link_to_toggle_menu</b>(link_text, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-link_to_toggle_menu" name="method-i-link_to_toggle_menu" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-link_to_toggle_menu_source')" id="l_method-i-link_to_toggle_menu_source">show</a>
                

                

                
              </p>
              <div id="method-i-link_to_toggle_menu_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">199</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_to_toggle_menu</span>(<span class="ruby-identifier">link_text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">200</span>   <span class="ruby-identifier">menu_id</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:menu_id</span>]
<span class="line-num">201</span>   <span class="ruby-identifier">menu_id</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">parameterize</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:id</span>]
<span class="line-num">202</span>   <span class="ruby-identifier">menu_id</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">link_text</span>.<span class="ruby-identifier">parameterize</span>
<span class="line-num">203</span>   <span class="ruby-identifier">menu_id</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rand</span>(<span class="ruby-value">100</span>).<span class="ruby-identifier">to_s</span>
<span class="line-num">204</span>   <span class="ruby-identifier">wrapper_options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:wrapper</span>) <span class="ruby-operator">||</span> {}
<span class="line-num">205</span>   <span class="ruby-identifier">wrapper_options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">206</span>   <span class="ruby-identifier">wrapper_options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; toggle_menu&quot;</span>
<span class="line-num">207</span>   <span class="ruby-identifier">wrapper_options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; button_toggle_menu&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>].<span class="ruby-identifier">split</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;button&quot;</span>)
<span class="line-num">208</span>   <span class="ruby-identifier">html</span> = <span class="ruby-identifier">link_to_toggle</span>(<span class="ruby-identifier">link_text</span>, <span class="ruby-node">&quot;##{menu_id}&quot;</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">209</span>   <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">menu_id</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;menu&quot;</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;display: none&quot;</span>)
<span class="line-num">210</span>   <span class="ruby-identifier">concat</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">html</span>, <span class="ruby-identifier">wrapper_options</span>)
<span class="line-num">211</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-loading">
            
              <b>loading</b>(content = nil, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-loading" name="method-i-loading" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-loading_source')" id="l_method-i-loading_source">show</a>
                

                

                
              </p>
              <div id="method-i-loading_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">705</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">loading</span>(<span class="ruby-identifier">content</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">706</span>   <span class="ruby-identifier">content</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-string">&quot;loading&quot;</span> )
<span class="line-num">707</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] = <span class="ruby-node">&quot;#{options[:class]} loading status&quot;</span>
<span class="line-num">708</span>   <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:span</span>, (<span class="ruby-identifier">block_given?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">content</span>), <span class="ruby-identifier">options</span>
<span class="line-num">709</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-lowercase_equivalent_model_name_for">
            
              <b>lowercase_equivalent_model_name_for</b>( klass )
            
            <a href="../classes/ApplicationHelper.html#method-i-lowercase_equivalent_model_name_for" name="method-i-lowercase_equivalent_model_name_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-lowercase_equivalent_model_name_for_source')" id="l_method-i-lowercase_equivalent_model_name_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-lowercase_equivalent_model_name_for_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1046</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">lowercase_equivalent_model_name_for</span>( <span class="ruby-identifier">klass</span> )
<span class="line-num">1047</span>   <span class="ruby-identifier">class_name_key</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>
<span class="line-num">1048</span>   <span class="ruby-identifier">class_name</span> = <span class="ruby-identifier">class_name_key</span>.<span class="ruby-identifier">humanize</span>.<span class="ruby-identifier">downcase</span>
<span class="line-num">1049</span>   <span class="ruby-identifier">potential_keys</span> = [
<span class="line-num">1050</span>     <span class="ruby-node">&quot;activerecord.models.#{class_name_key.camelcase}&quot;</span>,
<span class="line-num">1051</span>     <span class="ruby-identifier">class_name_key</span>,
<span class="line-num">1052</span>     <span class="ruby-node">&quot;#{class_name_key}_&quot;</span>
<span class="line-num">1053</span>   ]
<span class="line-num">1054</span>   <span class="ruby-comment"># Find the key that is lowercase in English, b/c we&#39;re maddeningly</span>
<span class="line-num">1055</span>   <span class="ruby-comment"># inconsistent about this</span>
<span class="line-num">1056</span>   <span class="ruby-identifier">lowercase_key</span> = <span class="ruby-identifier">potential_keys</span>.<span class="ruby-identifier">detect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">|</span>
<span class="line-num">1057</span>     <span class="ruby-identifier">en_t</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-identifier">k</span>, <span class="ruby-value">locale:</span> <span class="ruby-string">&quot;en&quot;</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span> )
<span class="line-num">1058</span>     <span class="ruby-identifier">en_t</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">en_t</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">en_t</span>[<span class="ruby-value">0</span>]
<span class="line-num">1059</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1060</span>   <span class="ruby-identifier">lowercase_model_name</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">lowercase_key</span>
<span class="line-num">1061</span>     <span class="ruby-comment"># puts &quot;using lowercase key: #{lowercase_key}&quot;</span>
<span class="line-num">1062</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-identifier">lowercase_key</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span> )
<span class="line-num">1063</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1064</span>   <span class="ruby-identifier">lowercase_model_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">potential_keys</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">|</span>
<span class="line-num">1065</span>     <span class="ruby-identifier">lmn</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-identifier">k</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span> )
<span class="line-num">1066</span>     <span class="ruby-comment"># puts &quot;trying key #{k}: #{lmn}&quot;</span>
<span class="line-num">1067</span>     <span class="ruby-identifier">lmn</span>
<span class="line-num">1068</span>   <span class="ruby-keyword">end</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">first</span>
<span class="line-num">1069</span>   <span class="ruby-identifier">lowercase_model_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">class_name</span>
<span class="line-num">1070</span>   <span class="ruby-identifier">lowercase_model_name</span>
<span class="line-num">1071</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-machine_tag_pieces">
            
              <b>machine_tag_pieces</b>(tag)
            
            <a href="../classes/ApplicationHelper.html#method-i-machine_tag_pieces" name="method-i-machine_tag_pieces" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-machine_tag_pieces_source')" id="l_method-i-machine_tag_pieces_source">show</a>
                

                

                
              </p>
              <div id="method-i-machine_tag_pieces_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1403</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">machine_tag_pieces</span>(<span class="ruby-identifier">tag</span>)
<span class="line-num">1404</span>   <span class="ruby-identifier">pieces</span> = <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;=&#39;</span>)
<span class="line-num">1405</span>   <span class="ruby-identifier">predicate</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">pieces</span>
<span class="line-num">1406</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">pieces</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">1407</span>     <span class="ruby-identifier">value</span>, <span class="ruby-identifier">namespace</span>, <span class="ruby-identifier">predicate</span> = <span class="ruby-identifier">pieces</span>
<span class="line-num">1408</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">predicate</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\:/</span>
<span class="line-num">1409</span>     <span class="ruby-identifier">namespace</span>, <span class="ruby-identifier">predicate</span> = <span class="ruby-identifier">predicate</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;:&#39;</span>)
<span class="line-num">1410</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1411</span>     <span class="ruby-identifier">predicate</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">pieces</span>
<span class="line-num">1412</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1413</span>   [<span class="ruby-identifier">namespace</span>, <span class="ruby-identifier">predicate</span>, <span class="ruby-identifier">value</span>]
<span class="line-num">1414</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-markdown">
            
              <b>markdown</b>( text )
            
            <a href="../classes/ApplicationHelper.html#method-i-markdown" name="method-i-markdown" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-markdown_source')" id="l_method-i-markdown_source">show</a>
                

                

                
              </p>
              <div id="method-i-markdown_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">379</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">markdown</span>( <span class="ruby-identifier">text</span> )
<span class="line-num">380</span>   <span class="ruby-ivar">@markdown</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Redcarpet</span><span class="ruby-operator">::</span><span class="ruby-constant">Markdown</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">Redcarpet</span><span class="ruby-operator">::</span><span class="ruby-constant">Render</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>,
<span class="line-num">381</span>     <span class="ruby-value">tables:</span> <span class="ruby-keyword">true</span>,
<span class="line-num">382</span>     <span class="ruby-value">disable_indented_code_blocks:</span> <span class="ruby-keyword">true</span>,
<span class="line-num">383</span>     <span class="ruby-value">lax_spacing:</span> <span class="ruby-keyword">true</span>,
<span class="line-num">384</span>     <span class="ruby-value">no_intra_emphasis:</span> <span class="ruby-keyword">true</span>
<span class="line-num">385</span>   )
<span class="line-num">386</span>   <span class="ruby-ivar">@markdown</span>.<span class="ruby-identifier">render</span>( <span class="ruby-identifier">text</span> )
<span class="line-num">387</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-member_of-3F">
            
              <b>member_of?</b>(project)
            
            <a href="../classes/ApplicationHelper.html#method-i-member_of-3F" name="method-i-member_of-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-member_of-3F_source')" id="l_method-i-member_of-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-member_of-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">166</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">member_of?</span>(<span class="ruby-identifier">project</span>)
<span class="line-num">167</span>  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">logged_in?</span>
<span class="line-num">168</span>  <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">project_users</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">project_id:</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">first</span>
<span class="line-num">169</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-modal_image">
            
              <b>modal_image</b>(photo, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-modal_image" name="method-i-modal_image" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-modal_image_source')" id="l_method-i-modal_image_source">show</a>
                

                

                
              </p>
              <div id="method-i-modal_image_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">277</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">modal_image</span>(<span class="ruby-identifier">photo</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">278</span>   <span class="ruby-identifier">size</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:size</span>]
<span class="line-num">279</span>   <span class="ruby-identifier">img_url</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">photo</span>.<span class="ruby-identifier">best_url</span>(<span class="ruby-identifier">size</span>)
<span class="line-num">280</span>   <span class="ruby-identifier">link_options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-string">&quot;data-photo-path&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">photo_path</span>(<span class="ruby-identifier">photo</span>, <span class="ruby-value">:partial</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;photo&#39;</span>))
<span class="line-num">281</span>   <span class="ruby-identifier">link_options</span>[<span class="ruby-value">:class</span>] = <span class="ruby-node">&quot;#{link_options[:class]} modal_image_link #{size}&quot;</span>.<span class="ruby-identifier">strip</span>
<span class="line-num">282</span>   <span class="ruby-identifier">link_to</span>(
<span class="line-num">283</span>     <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">img_url</span>,
<span class="line-num">284</span>       <span class="ruby-value">:title</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">photo</span>.<span class="ruby-identifier">attribution</span>,
<span class="line-num">285</span>       <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;photo_#{photo.id}&quot;</span>,
<span class="line-num">286</span>       <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;image #{size}&quot;</span>) <span class="ruby-operator">+</span> 
<span class="line-num">287</span>     <span class="ruby-identifier">image_tag</span>(<span class="ruby-string">&#39;silk/magnifier.png&#39;</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;zoom_icon&#39;</span>),
<span class="line-num">288</span>     <span class="ruby-identifier">photo</span>.<span class="ruby-identifier">native_page_url</span>,
<span class="line-num">289</span>     <span class="ruby-identifier">link_options</span>
<span class="line-num">290</span>   )
<span class="line-num">291</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-month_graph">
            
              <b>month_graph</b>(counts, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-month_graph" name="method-i-month_graph" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-month_graph_source')" id="l_method-i-month_graph_source">show</a>
                

                

                
              </p>
              <div id="method-i-month_graph_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">615</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">month_graph</span>(<span class="ruby-identifier">counts</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">616</span>   <span class="ruby-keyword">return</span> <span class="ruby-string">&#39;&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">counts</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">617</span>   <span class="ruby-identifier">max</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:max</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">counts</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">max</span>
<span class="line-num">618</span>   <span class="ruby-identifier">html</span> = <span class="ruby-string">&#39;&#39;</span>
<span class="line-num">619</span>   <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:link</span>] <span class="ruby-operator">?</span> <span class="ruby-value">:a</span> <span class="ruby-operator">:</span> <span class="ruby-value">:span</span>
<span class="line-num">620</span>   <span class="ruby-identifier">tag_options</span> = {<span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;bar spacer&quot;</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;height: 100%; width: 0&quot;</span>}
<span class="line-num">621</span>   <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">tag</span>, <span class="ruby-string">&quot; &quot;</span>, <span class="ruby-identifier">tag_options</span>)
<span class="line-num">622</span>   <span class="ruby-constant">Date</span><span class="ruby-operator">::</span><span class="ruby-constant">MONTHNAMES</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">month_name</span>, <span class="ruby-identifier">month_index</span><span class="ruby-operator">|</span>
<span class="line-num">623</span>     <span class="ruby-identifier">count</span> = <span class="ruby-identifier">counts</span>[<span class="ruby-identifier">month_index</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
<span class="line-num">624</span>     <span class="ruby-identifier">month_name</span> = <span class="ruby-identifier">month_name</span> <span class="ruby-operator">||</span> <span class="ruby-string">&quot;?&quot;</span>
<span class="line-num">625</span>     <span class="ruby-identifier">tag_options</span> = {<span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;bar month_#{month_index}&quot;</span>, <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;height: #{(count.to_f / max * 100).to_i}%&quot;</span>}
<span class="line-num">626</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:link</span>]
<span class="line-num">627</span>       <span class="ruby-identifier">url_params</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:link</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:link</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">params</span>
<span class="line-num">628</span>       <span class="ruby-identifier">tag_options</span>[<span class="ruby-value">:href</span>] = <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">url_params</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:month</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">month_index</span>))
<span class="line-num">629</span>     <span class="ruby-keyword">end</span>
<span class="line-num">630</span>     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">tag_options</span>) <span class="ruby-keyword">do</span>
<span class="line-num">631</span>       <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>, <span class="ruby-identifier">count</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;count&quot;</span>) <span class="ruby-operator">+</span>
<span class="line-num">632</span>       <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>, <span class="ruby-identifier">t</span>(<span class="ruby-identifier">month_name</span>.<span class="ruby-identifier">downcase</span>, <span class="ruby-value">:default</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">month_name</span>)[<span class="ruby-value">0</span>], <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;month&quot;</span>)
<span class="line-num">633</span>     <span class="ruby-keyword">end</span>
<span class="line-num">634</span>   <span class="ruby-keyword">end</span>
<span class="line-num">635</span>   <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">html</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;monthgraph graph&#39;</span>)
<span class="line-num">636</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-native_url_for_photo">
            
              <b>native_url_for_photo</b>(photo)
            
            <a href="../classes/ApplicationHelper.html#method-i-native_url_for_photo" name="method-i-native_url_for_photo" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-native_url_for_photo_source')" id="l_method-i-native_url_for_photo_source">show</a>
                

                

                
              </p>
              <div id="method-i-native_url_for_photo_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">566</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">native_url_for_photo</span>(<span class="ruby-identifier">photo</span>)
<span class="line-num">567</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">photo</span>.<span class="ruby-identifier">native_page_url</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">photo</span>.<span class="ruby-identifier">native_page_url</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">568</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">photo</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>
<span class="line-num">569</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;FlickrPhoto&quot;</span>
<span class="line-num">570</span>     <span class="ruby-node">&quot;http://flickr.com/photos/#{photo.native_username}/#{photo.native_photo_id}&quot;</span>
<span class="line-num">571</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;LocalPhoto&quot;</span>
<span class="line-num">572</span>     <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">photo</span>.<span class="ruby-identifier">observations</span>.<span class="ruby-identifier">first</span>)
<span class="line-num">573</span>   <span class="ruby-keyword">else</span>
<span class="line-num">574</span>     <span class="ruby-keyword">nil</span>
<span class="line-num">575</span>   <span class="ruby-keyword">end</span>
<span class="line-num">576</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-num2letterID">
            
              <b>num2letterID</b>(num)
            
            <a href="../classes/ApplicationHelper.html#method-i-num2letterID" name="method-i-num2letterID" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-num2letterID_source')" id="l_method-i-num2letterID_source">show</a>
                

                

                
              </p>
              <div id="method-i-num2letterID_source" class="dyn-source">
                <pre>   <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num"> 7</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">num2letterID</span>(<span class="ruby-identifier">num</span>)
<span class="line-num"> 8</span>   <span class="ruby-identifier">alphabet</span> = <span class="ruby-string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
<span class="line-num"> 9</span>   <span class="ruby-identifier">alphabet</span>[<span class="ruby-identifier">num</span>,<span class="ruby-value">1</span>]
<span class="line-num">10</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-observation_field_value_for">
            
              <b>observation_field_value_for</b>(ofv)
            
            <a href="../classes/ApplicationHelper.html#method-i-observation_field_value_for" name="method-i-observation_field_value_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-observation_field_value_for_source')" id="l_method-i-observation_field_value_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-observation_field_value_for_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1289</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">observation_field_value_for</span>(<span class="ruby-identifier">ofv</span>)
<span class="line-num">1290</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">observation_field</span>.<span class="ruby-identifier">datatype</span> <span class="ruby-operator">==</span> <span class="ruby-constant">ObservationField</span><span class="ruby-operator">::</span><span class="ruby-constant">TAXON</span>
<span class="line-num">1291</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">taxon</span> = <span class="ruby-constant">Taxon</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">value</span>)
<span class="line-num">1292</span>       <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>, <span class="ruby-string">&quot;&amp;nbsp;&quot;</span>.<span class="ruby-identifier">html_safe</span>, 
<span class="line-num">1293</span>           <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;iconic_taxon_sprite #{taxon.iconic_taxon_name.to_s.downcase} selected&quot;</span>) <span class="ruby-operator">+</span> 
<span class="line-num">1294</span>         <span class="ruby-identifier">render</span>(<span class="ruby-string">&quot;shared/taxon&quot;</span>, <span class="ruby-value">:taxon</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">taxon</span>, <span class="ruby-value">:link_url</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">taxon</span>)
<span class="line-num">1295</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1296</span>       <span class="ruby-string">&quot;unknown&quot;</span>
<span class="line-num">1297</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1298</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">observation_field</span>.<span class="ruby-identifier">datatype</span> <span class="ruby-operator">==</span> <span class="ruby-constant">ObservationField</span><span class="ruby-operator">::</span><span class="ruby-constant">DNA</span>
<span class="line-num">1299</span>     <span class="ruby-identifier">css_class</span> = <span class="ruby-string">&quot;dna&quot;</span>
<span class="line-num">1300</span>     <span class="ruby-identifier">css_class</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">case</span> <span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">observation_field</span>.<span class="ruby-identifier">name</span>
<span class="line-num">1301</span>     <span class="ruby-keyword">when</span> <span class="ruby-regexp">/(coi|cox1)/i</span> <span class="ruby-keyword">then</span> <span class="ruby-string">&quot; bold-coi&quot;</span> 
<span class="line-num">1302</span>     <span class="ruby-keyword">when</span> <span class="ruby-regexp">/its/i</span> <span class="ruby-keyword">then</span> <span class="ruby-string">&quot; bold-its&quot;</span>
<span class="line-num">1303</span>     <span class="ruby-keyword">when</span> <span class="ruby-regexp">/rbcl|matk/i</span> <span class="ruby-keyword">then</span> <span class="ruby-string">&quot; bold-matk&quot;</span>
<span class="line-num">1304</span>     <span class="ruby-keyword">else</span> <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">1305</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1306</span>     <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s/</span>, <span class="ruby-string">&#39;&#39;</span>), <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">css_class</span>)
<span class="line-num">1307</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">observation_field</span>.<span class="ruby-identifier">datatype</span> <span class="ruby-operator">==</span> <span class="ruby-constant">ObservationField</span><span class="ruby-operator">::</span><span class="ruby-constant">TEXT</span>
<span class="line-num">1308</span>     <span class="ruby-identifier">formatted_user_text</span>( <span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">value</span>, <span class="ruby-value">skip_simple_format:</span> <span class="ruby-keyword">true</span> )
<span class="line-num">1309</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1310</span>     <span class="ruby-identifier">ofv</span>.<span class="ruby-identifier">value</span>
<span class="line-num">1311</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1312</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-observation_image">
            
              <b>observation_image</b>(observation, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-observation_image" name="method-i-observation_image" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-observation_image_source')" id="l_method-i-observation_image_source">show</a>
                

                

                
              </p>
              <div id="method-i-observation_image_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">432</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">observation_image</span>(<span class="ruby-identifier">observation</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">433</span>   <span class="ruby-identifier">style</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:style</span>]
<span class="line-num">434</span>   <span class="ruby-identifier">url</span> = <span class="ruby-identifier">observation_image_url</span>(<span class="ruby-identifier">observation</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">435</span>   <span class="ruby-identifier">url</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">iconic_taxon_image_url</span>(<span class="ruby-identifier">observation</span>.<span class="ruby-identifier">iconic_taxon_id</span>)
<span class="line-num">436</span>   <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">url</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">style</span>))
<span class="line-num">437</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-observations_for_map_tag_attrs">
            
              <b>observations_for_map_tag_attrs</b>(options)
            
            <a href="../classes/ApplicationHelper.html#method-i-observations_for_map_tag_attrs" name="method-i-observations_for_map_tag_attrs" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-observations_for_map_tag_attrs_source')" id="l_method-i-observations_for_map_tag_attrs_source">show</a>
                

                

                
              </p>
              <div id="method-i-observations_for_map_tag_attrs_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">821</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">observations_for_map_tag_attrs</span>(<span class="ruby-identifier">options</span>)
<span class="line-num">822</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:observations</span>].<span class="ruby-identifier">blank?</span>
<span class="line-num">823</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:observations</span>].<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
<span class="line-num">824</span>     <span class="ruby-identifier">o</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-value">:viewer</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">current_user</span>,
<span class="line-num">825</span>       <span class="ruby-value">:force_coordinate_visibility</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@coordinates_viewable</span>,
<span class="line-num">826</span>       <span class="ruby-value">:include</span> <span class="ruby-operator">=&gt;</span> [ { <span class="ruby-value">:user</span> <span class="ruby-operator">=&gt;</span> { <span class="ruby-value">:only</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:login</span> },
<span class="line-num">827</span>         <span class="ruby-value">:taxon</span> <span class="ruby-operator">=&gt;</span> { <span class="ruby-value">:only</span> <span class="ruby-operator">=&gt;</span> [ <span class="ruby-value">:id</span>, <span class="ruby-value">:name</span> ] } },
<span class="line-num">828</span>         <span class="ruby-value">:iconic_taxon</span> ],
<span class="line-num">829</span>       <span class="ruby-value">:methods</span> <span class="ruby-operator">=&gt;</span> [ <span class="ruby-value">:iconic_taxon_name</span> ],
<span class="line-num">830</span>       <span class="ruby-value">:except</span> <span class="ruby-operator">=&gt;</span> [ <span class="ruby-value">:description</span> ] ).<span class="ruby-identifier">html_safe</span>
<span class="line-num">831</span>   }
<span class="line-num">832</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-one_line_observation">
            
              <b>one_line_observation</b>(o, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-one_line_observation" name="method-i-one_line_observation" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-one_line_observation_source')" id="l_method-i-one_line_observation_source">show</a>
                

                

                
              </p>
              <div id="method-i-one_line_observation_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">463</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">one_line_observation</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">464</span>   <span class="ruby-identifier">skip</span> = (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:skip</span>) <span class="ruby-operator">||</span> []).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_sym</span>)
<span class="line-num">465</span>   <span class="ruby-identifier">txt</span> = <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">466</span>   <span class="ruby-identifier">txt</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;#{o.user.login} observed &quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">skip</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:user</span>)
<span class="line-num">467</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">skip</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:taxon</span>)
<span class="line-num">468</span>     <span class="ruby-identifier">txt</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">taxon</span>
<span class="line-num">469</span>       <span class="ruby-identifier">render</span>(<span class="ruby-value">:partial</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;shared/taxon&#39;</span>, <span class="ruby-value">:locals</span> <span class="ruby-operator">=&gt;</span> {
<span class="line-num">470</span>         <span class="ruby-value">:taxon</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">taxon</span>,
<span class="line-num">471</span>         <span class="ruby-value">:include_article</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>
<span class="line-num">472</span>       })
<span class="line-num">473</span>     <span class="ruby-keyword">else</span>
<span class="line-num">474</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:something</span>)
<span class="line-num">475</span>     <span class="ruby-keyword">end</span>
<span class="line-num">476</span>     <span class="ruby-identifier">txt</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; &quot;</span>
<span class="line-num">477</span>   <span class="ruby-keyword">end</span>
<span class="line-num">478</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">skip</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:observed_on</span>)
<span class="line-num">479</span>     <span class="ruby-identifier">txt</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">observed_on</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">480</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:in_the_past</span>).<span class="ruby-identifier">downcase</span>
<span class="line-num">481</span>     <span class="ruby-keyword">else</span>
<span class="line-num">482</span>       <span class="ruby-node">&quot;#{t(:on_day, :default =&gt; &quot;on&quot;)} #{l o.observed_on, format: :long} &quot;</span>
<span class="line-num">483</span>     <span class="ruby-keyword">end</span>
<span class="line-num">484</span>   <span class="ruby-keyword">end</span>
<span class="line-num">485</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">skip</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:place_guess</span>)
<span class="line-num">486</span>     <span class="ruby-identifier">txt</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">place_guess</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">487</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:somewhere_on_earth</span>).<span class="ruby-identifier">downcase</span>
<span class="line-num">488</span>     <span class="ruby-keyword">else</span>
<span class="line-num">489</span>       <span class="ruby-node">&quot;#{t(:in, :default =&gt; &quot;in&quot;)} #{o.place_guess}&quot;</span>
<span class="line-num">490</span>     <span class="ruby-keyword">end</span>
<span class="line-num">491</span>   <span class="ruby-keyword">end</span>
<span class="line-num">492</span>   <span class="ruby-identifier">txt</span>
<span class="line-num">493</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-photo_type_label">
            
              <b>photo_type_label</b>( type )
            
            <a href="../classes/ApplicationHelper.html#method-i-photo_type_label" name="method-i-photo_type_label" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-photo_type_label_source')" id="l_method-i-photo_type_label_source">show</a>
                

                

                
              </p>
              <div id="method-i-photo_type_label_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1542</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">photo_type_label</span>( <span class="ruby-identifier">type</span> )
<span class="line-num">1543</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span>
<span class="line-num">1544</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;FlickrPhoto&quot;</span>
<span class="line-num">1545</span>     <span class="ruby-string">&quot;Flickr&quot;</span>
<span class="line-num">1546</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;FacebookPhoto&quot;</span>
<span class="line-num">1547</span>     <span class="ruby-string">&quot;Facebook&quot;</span>
<span class="line-num">1548</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;PicasaPhoto&quot;</span>
<span class="line-num">1549</span>     <span class="ruby-string">&quot;Google Picasa&quot;</span>
<span class="line-num">1550</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1551</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-value">:unknown</span> )
<span class="line-num">1552</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1553</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-popover">
            
              <b>popover</b>(text, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-popover" name="method-i-popover" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-popover_source')" id="l_method-i-popover_source">show</a>
                

                

                
              </p>
              <div id="method-i-popover_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">600</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">popover</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">601</span>   <span class="ruby-identifier">tip_id</span> = <span class="ruby-node">&quot;tip_#{serial_id}&quot;</span>
<span class="line-num">602</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:class</span>] = <span class="ruby-node">&quot;#{options[:class]} #{tip_id}_target&quot;</span>
<span class="line-num">603</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:data</span>] <span class="ruby-operator">||=</span> {}
<span class="line-num">604</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:data</span>][<span class="ruby-value">:popover</span>] <span class="ruby-operator">||=</span> {}
<span class="line-num">605</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:data</span>][<span class="ruby-value">:popover</span>][<span class="ruby-value">:content</span>] = <span class="ruby-node">&quot;##{tip_id}&quot;</span>
<span class="line-num">606</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:data</span>][<span class="ruby-value">:popover</span>][<span class="ruby-value">:style</span>] <span class="ruby-operator">||=</span> {}
<span class="line-num">607</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:data</span>][<span class="ruby-value">:popover</span>][<span class="ruby-value">:style</span>][<span class="ruby-value">:classes</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">608</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:data</span>][<span class="ruby-value">:popover</span>][<span class="ruby-value">:style</span>][<span class="ruby-value">:classes</span>] <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; popovertip&quot;</span>
<span class="line-num">609</span>   <span class="ruby-identifier">html</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:button</span>, <span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">610</span>   <span class="ruby-comment"># html += content_tag(:div, content_tag(:div, capture(&amp;block), &#39;class&#39;: &#39;popovertip&#39;), id: tip_id, style: &quot;display:none&quot;)</span>
<span class="line-num">611</span>   <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-value">id:</span> <span class="ruby-identifier">tip_id</span>, <span class="ruby-value">style:</span> <span class="ruby-string">&quot;display:none&quot;</span>)
<span class="line-num">612</span>   <span class="ruby-identifier">html</span>
<span class="line-num">613</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-post_archives_by_month_path">
            
              <b>post_archives_by_month_path</b>( parent, year, month )
            
            <a href="../classes/ApplicationHelper.html#method-i-post_archives_by_month_path" name="method-i-post_archives_by_month_path" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-post_archives_by_month_path_source')" id="l_method-i-post_archives_by_month_path_source">show</a>
                

                

                
              </p>
              <div id="method-i-post_archives_by_month_path_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1455</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">post_archives_by_month_path</span>( <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">year</span>, <span class="ruby-identifier">month</span> )
<span class="line-num">1456</span>   <span class="ruby-identifier">parent_slug</span> = <span class="ruby-ivar">@parent_slug</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">try_methods</span>( <span class="ruby-value">:login</span>, <span class="ruby-value">:slug</span> )
<span class="line-num">1457</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>
<span class="line-num">1458</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Project&quot;</span>
<span class="line-num">1459</span>     <span class="ruby-identifier">project_journal_archives_by_month_path</span>( <span class="ruby-identifier">parent_slug</span>, <span class="ruby-identifier">year</span>, <span class="ruby-identifier">month</span> )
<span class="line-num">1460</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1461</span>     <span class="ruby-identifier">journal_archives_by_month_path</span>( <span class="ruby-identifier">parent_slug</span>, <span class="ruby-identifier">year</span>, <span class="ruby-identifier">month</span> )
<span class="line-num">1462</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1463</span>     <span class="ruby-identifier">archives_by_month_site_posts_path</span>( <span class="ruby-identifier">year</span>, <span class="ruby-identifier">month</span> )
<span class="line-num">1464</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1465</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-post_parent_path">
            
              <b>post_parent_path</b>( parent, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-post_parent_path" name="method-i-post_parent_path" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-post_parent_path_source')" id="l_method-i-post_parent_path_source">show</a>
                

                

                
              </p>
              <div id="method-i-post_parent_path_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1443</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">post_parent_path</span>( <span class="ruby-identifier">parent</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">1444</span>   <span class="ruby-identifier">parent_slug</span> = <span class="ruby-ivar">@parent_slug</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">try_methods</span>( <span class="ruby-value">:login</span>, <span class="ruby-value">:slug</span> )
<span class="line-num">1445</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>
<span class="line-num">1446</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Project&quot;</span>
<span class="line-num">1447</span>     <span class="ruby-identifier">project_journal_path</span>( <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-value">project_id:</span> <span class="ruby-identifier">parent_slug</span> ) )
<span class="line-num">1448</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1449</span>     <span class="ruby-identifier">journal_by_login_path</span>( <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-value">login:</span> <span class="ruby-identifier">parent_slug</span> ) )
<span class="line-num">1450</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1451</span>     <span class="ruby-identifier">site_posts_path</span>( <span class="ruby-identifier">options</span> )
<span class="line-num">1452</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1453</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-references">
            
              <b>references</b>(options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-references" name="method-i-references" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-references_source')" id="l_method-i-references_source">show</a>
                

                

                
              </p>
              <div id="method-i-references_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1334</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">references</span>(<span class="ruby-identifier">options</span> = {})
<span class="line-num">1335</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@_citations</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">1336</span>   <span class="ruby-identifier">lis</span> = <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">1337</span>   <span class="ruby-ivar">@_citations</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">citation</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
<span class="line-num">1338</span>     <span class="ruby-identifier">lis</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:linked</span>]
<span class="line-num">1339</span>       <span class="ruby-identifier">l</span> = <span class="ruby-identifier">link_to</span> <span class="ruby-identifier">i</span><span class="ruby-value">+1</span>, <span class="ruby-node">&quot;#cit#{i+1}&quot;</span>
<span class="line-num">1340</span>       <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:li</span>, <span class="ruby-node">&quot;#{l}. #{citation}&quot;</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;reference&quot;</span>, <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;ref#{i+1}&quot;</span>)
<span class="line-num">1341</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1342</span>       <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:li</span>, <span class="ruby-identifier">citation</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;reference&quot;</span>, <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;ref#{i+1}&quot;</span>)
<span class="line-num">1343</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1344</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1345</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:linked</span>]
<span class="line-num">1346</span>     <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:ul</span>, <span class="ruby-identifier">lis</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;references&quot;</span>
<span class="line-num">1347</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1348</span>     <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:ol</span>, <span class="ruby-identifier">lis</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;references&quot;</span>
<span class="line-num">1349</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1350</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-remaining_paragraphs_of_text">
            
              <b>remaining_paragraphs_of_text</b>(text,split)
            
            <a href="../classes/ApplicationHelper.html#method-i-remaining_paragraphs_of_text" name="method-i-remaining_paragraphs_of_text" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-remaining_paragraphs_of_text_source')" id="l_method-i-remaining_paragraphs_of_text_source">show</a>
                

                

                
              </p>
              <div id="method-i-remaining_paragraphs_of_text_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">300</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remaining_paragraphs_of_text</span>(<span class="ruby-identifier">text</span>,<span class="ruby-identifier">split</span>)
<span class="line-num">301</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">302</span>   <span class="ruby-identifier">paragraphs</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">split</span>)
<span class="line-num">303</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">paragraphs</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">paragraphs</span>.<span class="ruby-identifier">length</span>].<span class="ruby-identifier">join</span>(<span class="ruby-identifier">split</span>)
<span class="line-num">304</span>   <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">text</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">305</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-render_in_format">
            
              <b>render_in_format</b>(format, *args)
            
            <a href="../classes/ApplicationHelper.html#method-i-render_in_format" name="method-i-render_in_format" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-render_in_format_source')" id="l_method-i-render_in_format_source">show</a>
                

                

                
              </p>
              <div id="method-i-render_in_format_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">389</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">render_in_format</span>(<span class="ruby-identifier">format</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">390</span>   <span class="ruby-identifier">old_formats</span> = <span class="ruby-identifier">formats</span>
<span class="line-num">391</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">formats</span> = [<span class="ruby-identifier">format</span>]
<span class="line-num">392</span>   <span class="ruby-identifier">html</span> = <span class="ruby-identifier">render</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">393</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">formats</span> = <span class="ruby-identifier">old_formats</span>
<span class="line-num">394</span>   <span class="ruby-identifier">html</span>
<span class="line-num">395</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-responsive-3F">
            
              <b>responsive?</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-responsive-3F" name="method-i-responsive-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-responsive-3F_source')" id="l_method-i-responsive-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-responsive-3F_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1538</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">responsive?</span>
<span class="line-num">1539</span>   <span class="ruby-ivar">@responsive</span>
<span class="line-num">1540</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rights">
            
              <b>rights</b>(record, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-rights" name="method-i-rights" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-rights_source')" id="l_method-i-rights_source">show</a>
                

                

                
              </p>
              <div id="method-i-rights_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">910</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rights</span>(<span class="ruby-identifier">record</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">911</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:separator</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&lt;br/&gt;&quot;</span>
<span class="line-num">912</span>   <span class="ruby-identifier">s</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Observation</span>
<span class="line-num">913</span>     <span class="ruby-identifier">rights_for_observation</span>( <span class="ruby-identifier">record</span>, <span class="ruby-identifier">options</span> )
<span class="line-num">914</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Photo</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Sound</span>)
<span class="line-num">915</span>     <span class="ruby-identifier">rights_for_media</span>( <span class="ruby-identifier">record</span>, <span class="ruby-identifier">options</span> )
<span class="line-num">916</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:attribution</span>)
<span class="line-num">917</span>     <span class="ruby-identifier">record</span>.<span class="ruby-identifier">attribution</span>
<span class="line-num">918</span>   <span class="ruby-keyword">end</span>
<span class="line-num">919</span>   <span class="ruby-identifier">s</span> <span class="ruby-operator">||=</span> <span class="ruby-node">&quot;&amp;copy; #{user_name}&quot;</span>
<span class="line-num">920</span>   <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>, <span class="ruby-identifier">s</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">class:</span> <span class="ruby-string">&quot;rights verticalmiddle&quot;</span>)
<span class="line-num">921</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rights_for_media">
            
              <b>rights_for_media</b>( record, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-rights_for_media" name="method-i-rights_for_media" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-rights_for_media_source')" id="l_method-i-rights_for_media_source">show</a>
                

                

                
              </p>
              <div id="method-i-rights_for_media_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">951</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rights_for_media</span>( <span class="ruby-identifier">record</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">952</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">953</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">native_realname</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_name</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">954</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">native_username</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_name</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">955</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">try</span>(<span class="ruby-value">:name</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_name</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">956</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">try</span>(<span class="ruby-value">:login</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_name</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">957</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value">:unknown</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_name</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">958</span>   <span class="ruby-identifier">s</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">copyrighted?</span>
<span class="line-num">959</span>     <span class="ruby-node">&quot;&amp;copy; #{user_name}&quot;</span>
<span class="line-num">960</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">license_code</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Observation</span><span class="ruby-operator">::</span><span class="ruby-constant">CC0</span>
<span class="line-num">961</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value">:by_user</span>, <span class="ruby-value">user:</span> <span class="ruby-identifier">user_name</span>)
<span class="line-num">962</span>   <span class="ruby-keyword">else</span>
<span class="line-num">963</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&#39;copyright.no_known_copyright_restrictions&#39;</span>, <span class="ruby-value">name:</span> <span class="ruby-identifier">user_name</span>, <span class="ruby-value">license_name:</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value">:public_domain</span>))
<span class="line-num">964</span>   <span class="ruby-keyword">end</span>
<span class="line-num">965</span> 
<span class="line-num">966</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">all_rights_reserved?</span>
<span class="line-num">967</span>     <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;#{options[:separator]}#{I18n.t(:all_rights_reserved)}&quot;</span>
<span class="line-num">968</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">creative_commons?</span>
<span class="line-num">969</span>     <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:separator</span>]
<span class="line-num">970</span>     <span class="ruby-identifier">code</span> = <span class="ruby-constant">Photo</span>.<span class="ruby-identifier">license_code_for_number</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">license</span>)
<span class="line-num">971</span>     <span class="ruby-identifier">url</span> = <span class="ruby-identifier">url_for_license</span>(<span class="ruby-identifier">code</span>)
<span class="line-num">972</span>     <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>) <span class="ruby-keyword">do</span>
<span class="line-num">973</span>       <span class="ruby-identifier">c</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_image</span>]
<span class="line-num">974</span>         <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">975</span>       <span class="ruby-keyword">else</span>
<span class="line-num">976</span>         <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">image_tag</span>(<span class="ruby-node">&quot;#{code}_small.png&quot;</span>), <span class="ruby-identifier">url</span>, <span class="ruby-value">rel:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:rel</span>]) <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span>
<span class="line-num">977</span>       <span class="ruby-keyword">end</span>
<span class="line-num">978</span>       <span class="ruby-identifier">license_blurb</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">license_code</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Observation</span><span class="ruby-operator">::</span><span class="ruby-constant">CC0</span>
<span class="line-num">979</span>         <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;copyright.no_rights_reserved&quot;</span>)
<span class="line-num">980</span>       <span class="ruby-keyword">else</span>
<span class="line-num">981</span>         <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value">:some_rights_reserved</span>)
<span class="line-num">982</span>       <span class="ruby-keyword">end</span>
<span class="line-num">983</span>       <span class="ruby-identifier">c</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">license_blurb</span>, <span class="ruby-identifier">url</span>, <span class="ruby-value">rel:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:rel</span>])
<span class="line-num">984</span>     <span class="ruby-keyword">end</span>
<span class="line-num">985</span>   <span class="ruby-keyword">end</span>
<span class="line-num">986</span>   <span class="ruby-identifier">s</span>
<span class="line-num">987</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rights_for_observation">
            
              <b>rights_for_observation</b>( record, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-rights_for_observation" name="method-i-rights_for_observation" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-rights_for_observation_source')" id="l_method-i-rights_for_observation_source">show</a>
                

                

                
              </p>
              <div id="method-i-rights_for_observation_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">923</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rights_for_observation</span>( <span class="ruby-identifier">record</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">924</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>
<span class="line-num">925</span>   <span class="ruby-identifier">user_name</span> = <span class="ruby-identifier">record</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">login</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_name</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">926</span>   <span class="ruby-identifier">s</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">license</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Observation</span><span class="ruby-operator">::</span><span class="ruby-constant">CC0</span>
<span class="line-num">927</span>     <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value">:by_user</span>, <span class="ruby-value">user:</span> <span class="ruby-identifier">user_name</span>)
<span class="line-num">928</span>   <span class="ruby-keyword">else</span>
<span class="line-num">929</span>     <span class="ruby-node">&quot;&amp;copy; #{user_name}&quot;</span>
<span class="line-num">930</span>   <span class="ruby-keyword">end</span>
<span class="line-num">931</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">license</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">932</span>     <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;#{options[:separator]}#{I18n.t(:all_rights_reserved)}&quot;</span>
<span class="line-num">933</span>   <span class="ruby-keyword">else</span>
<span class="line-num">934</span>     <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:separator</span>]
<span class="line-num">935</span>     <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>) <span class="ruby-keyword">do</span>
<span class="line-num">936</span>       <span class="ruby-identifier">c</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_image</span>]
<span class="line-num">937</span>         <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">938</span>       <span class="ruby-keyword">else</span>
<span class="line-num">939</span>         <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">image_tag</span>(<span class="ruby-node">&quot;#{record.license}_small.png&quot;</span>), <span class="ruby-identifier">url_for_license</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">license</span>)) <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span>
<span class="line-num">940</span>       <span class="ruby-keyword">end</span>
<span class="line-num">941</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">record</span>.<span class="ruby-identifier">license</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Observation</span><span class="ruby-operator">::</span><span class="ruby-constant">CC0</span>
<span class="line-num">942</span>         <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&#39;copyright.no_rights_reserved&#39;</span>), <span class="ruby-identifier">url_for_license</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">license</span>))
<span class="line-num">943</span>       <span class="ruby-keyword">else</span>
<span class="line-num">944</span>         <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value">:some_rights_reserved</span>), <span class="ruby-identifier">url_for_license</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">license</span>))
<span class="line-num">945</span>       <span class="ruby-keyword">end</span>
<span class="line-num">946</span>     <span class="ruby-keyword">end</span>
<span class="line-num">947</span>   <span class="ruby-keyword">end</span>
<span class="line-num">948</span>   <span class="ruby-identifier">s</span>
<span class="line-num">949</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-separator">
            
              <b>separator</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-separator" name="method-i-separator" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-separator_source')" id="l_method-i-separator_source">show</a>
                

                

                
              </p>
              <div id="method-i-separator_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">500</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">separator</span>
<span class="line-num">501</span>   <span class="ruby-identifier">content_tag</span> <span class="ruby-value">:div</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">image_url</span>(<span class="ruby-string">&#39;logo-eee-15px.png&#39;</span>)), <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;column-separator&quot;</span>
<span class="line-num">502</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-serial_id">
            
              <b>serial_id</b>()
            
            <a href="../classes/ApplicationHelper.html#method-i-serial_id" name="method-i-serial_id" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-serial_id_source')" id="l_method-i-serial_id_source">show</a>
                

                

                
              </p>
              <div id="method-i-serial_id_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">504</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">serial_id</span>
<span class="line-num">505</span>   <span class="ruby-ivar">@__serial_id</span> = <span class="ruby-ivar">@__serial_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
<span class="line-num">506</span>   <span class="ruby-ivar">@__serial_id</span>
<span class="line-num">507</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-setup_map_tag_attrs">
            
              <b>setup_map_tag_attrs</b>(options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-setup_map_tag_attrs" name="method-i-setup_map_tag_attrs" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-setup_map_tag_attrs_source')" id="l_method-i-setup_map_tag_attrs_source">show</a>
                

                

                
              </p>
              <div id="method-i-setup_map_tag_attrs_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">711</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup_map_tag_attrs</span>(<span class="ruby-identifier">options</span> = {})
<span class="line-num">712</span>   <span class="ruby-identifier">map_tag_attrs</span> = {
<span class="line-num">713</span>     <span class="ruby-string">&quot;latitude&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:latitude</span>],
<span class="line-num">714</span>     <span class="ruby-string">&quot;longitude&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:longitude</span>],
<span class="line-num">715</span>     <span class="ruby-string">&quot;map-type&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:map_type</span>],
<span class="line-num">716</span>     <span class="ruby-string">&quot;zoom-level&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:zoom_level</span>],
<span class="line-num">717</span>     <span class="ruby-string">&quot;min-zoom&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:min_zoom</span>],
<span class="line-num">718</span>     <span class="ruby-string">&quot;url-coords&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:url_coords</span>] <span class="ruby-operator">?</span> <span class="ruby-string">&#39;true&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>,
<span class="line-num">719</span>     <span class="ruby-string">&quot;disable-fullscreen&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:disable_fullscreen</span>],
<span class="line-num">720</span>     <span class="ruby-string">&quot;show-range&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:show_range</span>] <span class="ruby-operator">?</span> <span class="ruby-string">&quot;true&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>,
<span class="line-num">721</span>     <span class="ruby-string">&quot;min-x&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:min_x</span>],
<span class="line-num">722</span>     <span class="ruby-string">&quot;min-y&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:min_y</span>],
<span class="line-num">723</span>     <span class="ruby-string">&quot;max-x&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:max_x</span>],
<span class="line-num">724</span>     <span class="ruby-string">&quot;max-y&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:max_y</span>],
<span class="line-num">725</span>     <span class="ruby-string">&quot;flag-letters&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:flag_letters</span>] <span class="ruby-operator">?</span> <span class="ruby-string">&quot;true&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>,
<span class="line-num">726</span>     <span class="ruby-string">&quot;map-type-control&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:map_type_control</span>],
<span class="line-num">727</span>     <span class="ruby-string">&quot;observations&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">observations_for_map_tag_attrs</span>(<span class="ruby-identifier">options</span>),
<span class="line-num">728</span>     <span class="ruby-string">&quot;place-layer-label&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.place_boundary&quot;</span>),
<span class="line-num">729</span>     <span class="ruby-string">&quot;taxon-range-layer-label&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.range&quot;</span>),
<span class="line-num">730</span>     <span class="ruby-string">&quot;taxon-places-layer-label&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.checklist_places&quot;</span>),
<span class="line-num">731</span>     <span class="ruby-string">&quot;taxon-places-layer-hover&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.checklist_places_description&quot;</span>),
<span class="line-num">732</span>     <span class="ruby-string">&quot;taxon-observations-layer-label&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_observations_layer_label</span>].<span class="ruby-identifier">blank?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-string">&quot;maps.overlays.observations&quot;</span> ) <span class="ruby-operator">:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:taxon_observations_layer_label</span>],
<span class="line-num">733</span>     <span class="ruby-string">&quot;all-layer-label&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.all_observations&quot;</span>),
<span class="line-num">734</span>     <span class="ruby-string">&quot;all-layer-description&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.every_publicly_visible_observation&quot;</span>),
<span class="line-num">735</span>     <span class="ruby-string">&quot;gbif-layer-label&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.gbif_network&quot;</span>),
<span class="line-num">736</span>     <span class="ruby-string">&quot;gbif-layer-hover&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.gbif_network_description&quot;</span>),
<span class="line-num">737</span>     <span class="ruby-string">&quot;enable-show-all-layer&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:enable_show_all_layer</span>] <span class="ruby-operator">?</span> <span class="ruby-string">&quot;true&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;false&quot;</span>,
<span class="line-num">738</span>     <span class="ruby-string">&quot;show-all-layer&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:show_all_layer</span>].<span class="ruby-identifier">to_json</span>,
<span class="line-num">739</span>     <span class="ruby-string">&quot;featured-layer-label&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-string">&quot;maps.overlays.featured_observations&quot;</span>),
<span class="line-num">740</span>     <span class="ruby-string">&quot;control-position&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:control_position</span>],
<span class="line-num">741</span>     <span class="ruby-string">&quot;map-style&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:map_style</span>],
<span class="line-num">742</span>     <span class="ruby-string">&quot;elastic_params&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:elastic_params</span>] <span class="ruby-operator">?</span>
<span class="line-num">743</span>       <span class="ruby-identifier">options</span>[<span class="ruby-value">:elastic_params</span>].<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{k}=#{v}&quot;</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;&amp;&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>,
<span class="line-num">744</span>     <span class="ruby-string">&quot;gesture-handling&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:gesture_handling</span>],
<span class="line-num">745</span>     <span class="ruby-string">&quot;placement&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:placement</span>]
<span class="line-num">746</span>   }
<span class="line-num">747</span>   <span class="ruby-identifier">append_taxon_layers</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">748</span>   <span class="ruby-identifier">append_place_layers</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">749</span>   <span class="ruby-identifier">append_observation_layers</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">750</span>   <span class="ruby-identifier">adjust_initial_bounds</span>(<span class="ruby-identifier">map_tag_attrs</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">751</span>   { <span class="ruby-string">&quot;data&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">map_tag_attrs</span>.<span class="ruby-identifier">delete_if</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span> } }
<span class="line-num">752</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-shareable_description">
            
              <b>shareable_description</b>( text )
            
            <a href="../classes/ApplicationHelper.html#method-i-shareable_description" name="method-i-shareable_description" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-shareable_description_source')" id="l_method-i-shareable_description_source">show</a>
                

                

                
              </p>
              <div id="method-i-shareable_description_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1519</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">shareable_description</span>( <span class="ruby-identifier">text</span> )
<span class="line-num">1520</span>   <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">1521</span>   <span class="ruby-identifier">truncate</span>(
<span class="line-num">1522</span>     <span class="ruby-identifier">strip_tags</span>(
<span class="line-num">1523</span>       <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s+/m</span>, <span class="ruby-string">&#39; &#39;</span>)
<span class="line-num">1524</span>     ).<span class="ruby-identifier">strip</span>, 
<span class="line-num">1525</span>     <span class="ruby-value">length:</span> <span class="ruby-value">1000</span>
<span class="line-num">1526</span>   ).<span class="ruby-identifier">strip</span>
<span class="line-num">1527</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-simple_format_with_structure">
            
              <b>simple_format_with_structure</b>( text, options )
            
            <a href="../classes/ApplicationHelper.html#method-i-simple_format_with_structure" name="method-i-simple_format_with_structure" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-simple_format_with_structure_source')" id="l_method-i-simple_format_with_structure_source">show</a>
                

                

                
              </p>
              <div id="method-i-simple_format_with_structure_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">348</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">simple_format_with_structure</span>( <span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> )
<span class="line-num">349</span>   <span class="ruby-identifier">new_text</span> = <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">350</span>   <span class="ruby-identifier">chunks</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>( <span class="ruby-regexp">/(&lt;table.*?table&gt;|&lt;ul.*?ul&gt;|&lt;ol.*?ol&gt;|&lt;pre.*?pre&gt;)/m</span> )
<span class="line-num">351</span>   <span class="ruby-identifier">chunks</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">chunk</span><span class="ruby-operator">|</span>
<span class="line-num">352</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">chunk</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/&lt;(table|ul|ol)&gt;/</span>
<span class="line-num">353</span>       <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>( <span class="ruby-identifier">chunk</span> )
<span class="line-num">354</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">table</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">at_css</span>( <span class="ruby-string">&quot;table&quot;</span> )
<span class="line-num">355</span>         <span class="ruby-identifier">table</span>[<span class="ruby-string">&quot;class&quot;</span>] = <span class="ruby-node">&quot;#{html.at_css( &quot;table&quot; )[&quot;class&quot;]} table&quot;</span>.<span class="ruby-identifier">strip</span>
<span class="line-num">356</span>       <span class="ruby-keyword">end</span>
<span class="line-num">357</span>       <span class="ruby-identifier">html</span>.<span class="ruby-identifier">css</span>( <span class="ruby-string">&quot;td, th, li&quot;</span> ).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
<span class="line-num">358</span>         <span class="ruby-keyword">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\n/</span>
<span class="line-num">359</span>           <span class="ruby-identifier">new_content</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.
<span class="line-num">360</span>             <span class="ruby-identifier">parse</span>( <span class="ruby-identifier">simple_format_with_structure</span>( <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">options</span> ).<span class="ruby-identifier">html_safe</span> )
<span class="line-num">361</span>           <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-keyword">nil</span>
<span class="line-num">362</span>           <span class="ruby-identifier">node</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_content</span>
<span class="line-num">363</span>         <span class="ruby-keyword">end</span>
<span class="line-num">364</span>       <span class="ruby-keyword">end</span>
<span class="line-num">365</span>       <span class="ruby-identifier">new_text</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">366</span>     <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">chunk</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/&lt;pre&gt;/</span>
<span class="line-num">367</span>       <span class="ruby-identifier">new_text</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">chunk</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">368</span>     <span class="ruby-keyword">else</span>
<span class="line-num">369</span>       <span class="ruby-identifier">new_text</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">simple_format</span>( <span class="ruby-identifier">chunk</span>, {}, <span class="ruby-identifier">options</span> ).<span class="ruby-identifier">html_safe</span>
<span class="line-num">370</span>     <span class="ruby-keyword">end</span>
<span class="line-num">371</span>   <span class="ruby-keyword">end</span>
<span class="line-num">372</span>   <span class="ruby-identifier">new_text</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">373</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-sortable_table_header">
            
              <b>sortable_table_header</b>( header, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-sortable_table_header" name="method-i-sortable_table_header" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-sortable_table_header_source')" id="l_method-i-sortable_table_header_source">show</a>
                

                

                
              </p>
              <div id="method-i-sortable_table_header_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1591</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sortable_table_header</span>( <span class="ruby-identifier">header</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">1592</span>   <span class="ruby-identifier">label</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:label</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">header</span>
<span class="line-num">1593</span>   <span class="ruby-identifier">content</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:span</span>) <span class="ruby-keyword">do</span>
<span class="line-num">1594</span>     <span class="ruby-identifier">s</span> = <span class="ruby-identifier">label</span>
<span class="line-num">1595</span>     <span class="ruby-keyword">if</span> <span class="ruby-ivar">@order_by</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">header</span>
<span class="line-num">1596</span>       <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@order</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;desc&quot;</span>
<span class="line-num">1597</span>         <span class="ruby-string">&quot; &amp;darr;&quot;</span>
<span class="line-num">1598</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1599</span>         <span class="ruby-string">&quot; &amp;uarr;&quot;</span>
<span class="line-num">1600</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1601</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1602</span>     <span class="ruby-identifier">s</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1603</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1604</span>   <span class="ruby-identifier">link_to</span>(
<span class="line-num">1605</span>     <span class="ruby-identifier">content</span>,
<span class="line-num">1606</span>     <span class="ruby-identifier">url_for_params</span>( {
<span class="line-num">1607</span>       <span class="ruby-value">order_by:</span> <span class="ruby-identifier">header</span>,
<span class="line-num">1608</span>       <span class="ruby-value">order:</span> <span class="ruby-ivar">@order</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;desc&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;asc&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;desc&quot;</span>
<span class="line-num">1609</span>     }.<span class="ruby-identifier">merge</span>( <span class="ruby-identifier">options</span>[<span class="ruby-value">:url_options</span>] ) ),
<span class="line-num">1610</span>     <span class="ruby-identifier">options</span>
<span class="line-num">1611</span>   )
<span class="line-num">1612</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-stripped_first_paragraph_of_text">
            
              <b>stripped_first_paragraph_of_text</b>(text,split = nil)
            
            <a href="../classes/ApplicationHelper.html#method-i-stripped_first_paragraph_of_text" name="method-i-stripped_first_paragraph_of_text" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-stripped_first_paragraph_of_text_source')" id="l_method-i-stripped_first_paragraph_of_text_source">show</a>
                

                

                
              </p>
              <div id="method-i-stripped_first_paragraph_of_text_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">293</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">stripped_first_paragraph_of_text</span>(<span class="ruby-identifier">text</span>,<span class="ruby-identifier">split</span> = <span class="ruby-keyword">nil</span>)
<span class="line-num">294</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">295</span>   <span class="ruby-identifier">split</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;\n\n&quot;</span>
<span class="line-num">296</span>   <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">split</span>)[<span class="ruby-value">0</span>]
<span class="line-num">297</span>   <span class="ruby-identifier">sanitize</span>( <span class="ruby-identifier">text</span>, <span class="ruby-value">tags:</span> <span class="ruby-node">%w(a b strong i em)</span>, <span class="ruby-value">attributes:</span> <span class="ruby-node">%w(href rel target)</span> ).<span class="ruby-identifier">html_safe</span>
<span class="line-num">298</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tag_to_xml">
            
              <b>tag_to_xml</b>(tag, xml)
            
            <a href="../classes/ApplicationHelper.html#method-i-tag_to_xml" name="method-i-tag_to_xml" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-tag_to_xml_source')" id="l_method-i-tag_to_xml_source">show</a>
                

                

                
              </p>
              <div id="method-i-tag_to_xml_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1416</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tag_to_xml</span>(<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">xml</span>)
<span class="line-num">1417</span>   <span class="ruby-identifier">namespace</span>, <span class="ruby-identifier">predicate</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">machine_tag_pieces</span>(<span class="ruby-identifier">tag</span>)
<span class="line-num">1418</span>   <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">tag</span> <span class="ruby-identifier">tag</span>, <span class="ruby-value">:predicate</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">predicate</span>, <span class="ruby-value">:namespace</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">namespace</span>, <span class="ruby-value">:value</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">value</span>
<span class="line-num">1419</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-taxonomic_taxon_list">
            
              <b>taxonomic_taxon_list</b>(taxa, options = {}, &amp;block)
            
            <a href="../classes/ApplicationHelper.html#method-i-taxonomic_taxon_list" name="method-i-taxonomic_taxon_list" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-taxonomic_taxon_list_source')" id="l_method-i-taxonomic_taxon_list_source">show</a>
                

                

                
              </p>
              <div id="method-i-taxonomic_taxon_list_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">404</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">taxonomic_taxon_list</span>(<span class="ruby-identifier">taxa</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">405</span>   <span class="ruby-identifier">taxa</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">taxon</span>, <span class="ruby-identifier">children</span><span class="ruby-operator">|</span>
<span class="line-num">406</span>     <span class="ruby-identifier">concat</span> <span class="ruby-node">&quot;&lt;li class=&#39;#{options[:class]}&#39;&gt;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">407</span>     <span class="ruby-keyword">yield</span> <span class="ruby-identifier">taxon</span>, <span class="ruby-identifier">children</span>
<span class="line-num">408</span>     <span class="ruby-keyword">unless</span> <span class="ruby-identifier">children</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">409</span>       <span class="ruby-identifier">concat</span> <span class="ruby-node">&quot;&lt;ul class=&#39;#{options[:ul_class]}&#39;&gt;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">410</span>       <span class="ruby-identifier">taxonomic_taxon_list</span>(<span class="ruby-identifier">children</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">411</span>       <span class="ruby-identifier">concat</span> <span class="ruby-string">&quot;&lt;/ul&gt;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">412</span>     <span class="ruby-keyword">end</span>
<span class="line-num">413</span>     <span class="ruby-identifier">concat</span> <span class="ruby-string">&quot;&lt;/li&gt;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">414</span>   <span class="ruby-keyword">end</span>
<span class="line-num">415</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-title_by_user">
            
              <b>title_by_user</b>( text )
            
            <a href="../classes/ApplicationHelper.html#method-i-title_by_user" name="method-i-title_by_user" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-title_by_user_source')" id="l_method-i-title_by_user_source">show</a>
                

                

                
              </p>
              <div id="method-i-title_by_user_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">375</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">title_by_user</span>( <span class="ruby-identifier">text</span> )
<span class="line-num">376</span>   <span class="ruby-identifier">h</span>( <span class="ruby-identifier">text</span> ).<span class="ruby-identifier">gsub</span>( <span class="ruby-string">&quot;&amp;amp;&quot;</span>, <span class="ruby-string">&quot;&amp;&quot;</span> ).<span class="ruby-identifier">gsub</span>( <span class="ruby-string">&quot;&amp;#39;&quot;</span>, <span class="ruby-string">&quot;&#39;&quot;</span> ).<span class="ruby-identifier">html_safe</span>
<span class="line-num">377</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-translate_with_consistent_case">
            
              <b>translate_with_consistent_case</b>( key, options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-translate_with_consistent_case" name="method-i-translate_with_consistent_case" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Another workaround for our inconsistent use of underscores in i18n keys</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-translate_with_consistent_case_source')" id="l_method-i-translate_with_consistent_case_source">show</a>
                

                

                
              </p>
              <div id="method-i-translate_with_consistent_case_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1624</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">translate_with_consistent_case</span>( <span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span> = {} )
<span class="line-num">1625</span>   <span class="ruby-identifier">lower_requested</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>( <span class="ruby-value">:case</span> ) <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;upper&quot;</span>
<span class="line-num">1626</span>   <span class="ruby-identifier">translation</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span> )
<span class="line-num">1627</span>   <span class="ruby-identifier">en</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-value">locale:</span> <span class="ruby-string">&quot;en&quot;</span> ) )
<span class="line-num">1628</span>   <span class="ruby-identifier">default_is_lower</span> = <span class="ruby-identifier">en</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">en</span>.<span class="ruby-identifier">downcase</span>
<span class="line-num">1629</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">translation</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lower_requested</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">default_is_lower</span>
<span class="line-num">1630</span> 
<span class="line-num">1631</span>   <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>( <span class="ruby-node">&quot;#{key}_&quot;</span>, <span class="ruby-identifier">options</span> )
<span class="line-num">1632</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-truncate_with_more">
            
              <b>truncate_with_more</b>(text, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-truncate_with_more" name="method-i-truncate_with_more" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-truncate_with_more_source')" id="l_method-i-truncate_with_more_source">show</a>
                

                

                
              </p>
              <div id="method-i-truncate_with_more_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">530</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">truncate_with_more</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">531</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">532</span>   <span class="ruby-identifier">more</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:more</span>) <span class="ruby-operator">||</span> <span class="ruby-node">&quot; ...#{t(:more).downcase} &amp;darr;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">533</span>   <span class="ruby-identifier">less</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:less</span>) <span class="ruby-operator">||</span> <span class="ruby-node">&quot; #{t(:less).downcase} &amp;uarr;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">534</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ellipsize</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:ellipsize</span>)
<span class="line-num">535</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:omission</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&quot;</span>
<span class="line-num">536</span>     <span class="ruby-identifier">options</span>[<span class="ruby-value">:separator</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot; &quot;</span>
<span class="line-num">537</span>   <span class="ruby-keyword">end</span>
<span class="line-num">538</span>   <span class="ruby-identifier">truncated</span> = <span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">escape:</span> <span class="ruby-keyword">false</span>))
<span class="line-num">539</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">truncated</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">truncated</span>
<span class="line-num">540</span> 
<span class="line-num">541</span>   <span class="ruby-identifier">truncated</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">truncated</span>)
<span class="line-num">542</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">truncated</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ellipsize</span>
<span class="line-num">543</span> 
<span class="line-num">544</span>   <span class="ruby-identifier">morelink</span> = <span class="ruby-identifier">link_to_function</span>(<span class="ruby-identifier">more</span>, <span class="ruby-string">&quot;$(this).parents(&#39;.truncated&#39;).hide().next(&#39;.untruncated&#39;).show()&quot;</span>, 
<span class="line-num">545</span>     <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;nobr ui&quot;</span>)
<span class="line-num">546</span>   <span class="ruby-identifier">last_node</span> = <span class="ruby-identifier">truncated</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">truncated</span>
<span class="line-num">547</span>   <span class="ruby-identifier">last_node</span> = <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">parent</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;a&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span>)
<span class="line-num">548</span>   <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">morelink</span>, <span class="ruby-string">&#39;UTF-8&#39;</span>))
<span class="line-num">549</span>   <span class="ruby-identifier">wrapper</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">truncated</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;truncated&quot;</span>)
<span class="line-num">550</span>   
<span class="line-num">551</span>   <span class="ruby-identifier">lesslink</span> = <span class="ruby-identifier">link_to_function</span>(<span class="ruby-identifier">less</span>, <span class="ruby-string">&quot;$(this).parents(&#39;.untruncated&#39;).hide().prev(&#39;.truncated&#39;).show()&quot;</span>, 
<span class="line-num">552</span>     <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;nobr ui&quot;</span>)
<span class="line-num">553</span>   <span class="ruby-identifier">untruncated</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">text</span>)
<span class="line-num">554</span>   <span class="ruby-identifier">last_node</span> = <span class="ruby-identifier">untruncated</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">untruncated</span>
<span class="line-num">555</span>   <span class="ruby-identifier">last_node</span> = <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">parent</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;a&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span>)
<span class="line-num">556</span>   <span class="ruby-identifier">last_node</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">lesslink</span>, <span class="ruby-string">&#39;UTF-8&#39;</span>))
<span class="line-num">557</span>   <span class="ruby-identifier">untruncated</span> = <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:div</span>, <span class="ruby-identifier">untruncated</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">html_safe</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;untruncated&quot;</span>, 
<span class="line-num">558</span>     <span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;display: none&quot;</span>)
<span class="line-num">559</span>   <span class="ruby-identifier">wrapper</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">untruncated</span>
<span class="line-num">560</span> <span class="ruby-keyword">rescue</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
<span class="line-num">561</span>   <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/error parsing fragment/</span>
<span class="line-num">562</span>   <span class="ruby-constant">Logstasher</span>.<span class="ruby-identifier">write_exception</span>(<span class="ruby-identifier">e</span>, <span class="ruby-value">request:</span> <span class="ruby-identifier">request</span>, <span class="ruby-value">session:</span> <span class="ruby-identifier">session</span>)
<span class="line-num">563</span>   <span class="ruby-identifier">text</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">564</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-update_image_for">
            
              <b>update_image_for</b>(update, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-update_image_for" name="method-i-update_image_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-update_image_for_source')" id="l_method-i-update_image_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-update_image_for_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1004</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_image_for</span>(<span class="ruby-identifier">update</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1005</span>   <span class="ruby-identifier">resource</span> = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource</span>
<span class="line-num">1006</span>   <span class="ruby-identifier">resource</span> = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">flaggable</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Flag&quot;</span>
<span class="line-num">1007</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>
<span class="line-num">1008</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1009</span>     <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">icon</span>.<span class="ruby-identifier">url</span>(<span class="ruby-value">:thumb</span>), <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:alt</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{resource.login} icon&quot;</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;usericon&quot;</span>))
<span class="line-num">1010</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Observation&quot;</span>
<span class="line-num">1011</span>     <span class="ruby-identifier">observation_image</span>(<span class="ruby-identifier">resource</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;square&quot;</span>))
<span class="line-num">1012</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Project&quot;</span>
<span class="line-num">1013</span>     <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">icon</span>.<span class="ruby-identifier">url</span>(<span class="ruby-value">:thumb</span>), <span class="ruby-identifier">options</span>)
<span class="line-num">1014</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;ProjectUserInvitation&quot;</span>
<span class="line-num">1015</span>     <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">icon</span>.<span class="ruby-identifier">url</span>(<span class="ruby-value">:thumb</span>), <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:alt</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;#{resource.user.login} icon&quot;</span>, <span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;usericon&quot;</span>))
<span class="line-num">1016</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;AssessmentSection&quot;</span>
<span class="line-num">1017</span>     <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">assessment</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">icon</span>.<span class="ruby-identifier">url</span>(<span class="ruby-value">:thumb</span>), <span class="ruby-identifier">options</span>)
<span class="line-num">1018</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;ListedTaxon&quot;</span>
<span class="line-num">1019</span>     <span class="ruby-identifier">image_tag</span>(<span class="ruby-string">&quot;checklist-icon-color-32px.png&quot;</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">1020</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Post&quot;</span>
<span class="line-num">1021</span>     <span class="ruby-keyword">case</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">parent_type</span>
<span class="line-num">1022</span>     <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1023</span>       <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">icon</span>.<span class="ruby-identifier">url</span>(<span class="ruby-value">:thumb</span>), <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;usericon&quot;</span>))
<span class="line-num">1024</span>     <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Project&quot;</span>
<span class="line-num">1025</span>       <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">icon</span>.<span class="ruby-identifier">url</span>(<span class="ruby-value">:thumb</span>), <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;projecticon&quot;</span>))
<span class="line-num">1026</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1027</span>       <span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">logo_square</span>.<span class="ruby-identifier">url</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:class</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;siteicon&quot;</span>))
<span class="line-num">1028</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1029</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Place&quot;</span>
<span class="line-num">1030</span>     <span class="ruby-identifier">image_tag</span>( <span class="ruby-identifier">image_url</span>( <span class="ruby-string">&quot;icon-maps.png&quot;</span> ), <span class="ruby-identifier">options</span> )
<span class="line-num">1031</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Taxon&quot;</span>
<span class="line-num">1032</span>     <span class="ruby-identifier">taxon_image</span>(<span class="ruby-identifier">resource</span>, {<span class="ruby-value">:style</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;square&quot;</span>, <span class="ruby-value">:width</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">48</span>}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>))
<span class="line-num">1033</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;TaxonSplit&quot;</span>, <span class="ruby-string">&quot;TaxonMerge&quot;</span>, <span class="ruby-string">&quot;TaxonSwap&quot;</span>, <span class="ruby-string">&quot;TaxonDrop&quot;</span>, <span class="ruby-string">&quot;TaxonStage&quot;</span>
<span class="line-num">1034</span>     <span class="ruby-identifier">image_tag</span>( <span class="ruby-identifier">image_url</span>( <span class="ruby-node">&quot;#{resource.class.name.underscore}-aaaaaa-48px.png&quot;</span>, <span class="ruby-identifier">options</span>) )
<span class="line-num">1035</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;ObservationField&quot;</span>
<span class="line-num">1036</span>     <span class="ruby-identifier">image_tag</span>( <span class="ruby-identifier">image_url</span>( <span class="ruby-string">&quot;notebook-icon-color-155px-shadow.jpg&quot;</span> ), <span class="ruby-identifier">options</span> )
<span class="line-num">1037</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1038</span>     <span class="ruby-identifier">image_tag</span>( <span class="ruby-identifier">image_url</span>( <span class="ruby-string">&quot;logo-cccccc-20px.png&quot;</span> ), <span class="ruby-identifier">options</span> )
<span class="line-num">1039</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1040</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-update_tagline_for">
            
              <b>update_tagline_for</b>(update, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-update_tagline_for" name="method-i-update_tagline_for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-update_tagline_for_source')" id="l_method-i-update_tagline_for_source">show</a>
                

                

                
              </p>
              <div id="method-i-update_tagline_for_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1073</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_tagline_for</span>(<span class="ruby-identifier">update</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">1074</span>   <span class="ruby-identifier">resource</span> = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource</span>
<span class="line-num">1075</span>   <span class="ruby-identifier">notifier</span> = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">notifier</span>
<span class="line-num">1076</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:user</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">notifier_user</span> = <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">user</span>)
<span class="line-num">1077</span>     <span class="ruby-identifier">notifier_user_link</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">person_url</span>(<span class="ruby-identifier">notifier_user</span>))
<span class="line-num">1078</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1079</span>   <span class="ruby-identifier">class_name_key</span> = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>
<span class="line-num">1080</span>   <span class="ruby-identifier">resource_txt</span> = <span class="ruby-identifier">lowercase_equivalent_model_name_for</span>( <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">class</span> )
<span class="line-num">1081</span>   <span class="ruby-identifier">resource_link</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>]
<span class="line-num">1082</span>     <span class="ruby-identifier">resource_txt</span>
<span class="line-num">1083</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1084</span>     <span class="ruby-identifier">link_to</span>( <span class="ruby-identifier">resource_txt</span>, <span class="ruby-identifier">url_for_resource_with_host</span>( <span class="ruby-identifier">resource</span> ) )
<span class="line-num">1085</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1086</span> 
<span class="line-num">1087</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Comment</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Identification</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">notification</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;mention&quot;</span>
<span class="line-num">1088</span>     <span class="ruby-identifier">noun</span> = <span class="ruby-identifier">t</span>( <span class="ruby-value">:activity_snipped_resource_with_indefinite_article</span>,
<span class="line-num">1089</span>       <span class="ruby-value">resource:</span> <span class="ruby-identifier">resource_link</span>.<span class="ruby-identifier">html_safe</span>,
<span class="line-num">1090</span>       <span class="ruby-value">vow_or_con:</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">class_name_key</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">class_name_key</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">downcase</span>,
<span class="line-num">1091</span>       <span class="ruby-value">gender:</span> <span class="ruby-identifier">class_name_key</span>
<span class="line-num">1092</span>     ).<span class="ruby-identifier">html_safe</span>
<span class="line-num">1093</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">resource_name</span> = <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">try_methods</span>(<span class="ruby-value">:name</span>, <span class="ruby-value">:title</span>)
<span class="line-num">1094</span>       <span class="ruby-identifier">noun</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; (\&quot;#{truncate(resource_name, :length =&gt; 30)}\&quot;)&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1095</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1096</span>     <span class="ruby-identifier">s</span> = <span class="ruby-identifier">activity_snippet</span>(<span class="ruby-identifier">update</span>, <span class="ruby-identifier">notifier</span>, <span class="ruby-identifier">notifier_user</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(
<span class="line-num">1097</span>       <span class="ruby-value">:noun</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">noun</span>
<span class="line-num">1098</span>     ))
<span class="line-num">1099</span>     <span class="ruby-keyword">return</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1100</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1101</span> 
<span class="line-num">1102</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ActsAsVotable</span><span class="ruby-operator">::</span><span class="ruby-constant">Vote</span>)
<span class="line-num">1103</span>     <span class="ruby-identifier">noun</span> = <span class="ruby-identifier">t</span>( <span class="ruby-value">:activity_snipped_resource_with_indefinite_article</span>,
<span class="line-num">1104</span>       <span class="ruby-value">resource:</span> <span class="ruby-identifier">resource_link</span>.<span class="ruby-identifier">html_safe</span>,
<span class="line-num">1105</span>       <span class="ruby-value">vow_or_con:</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">class_name_key</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">class_name_key</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">downcase</span>,
<span class="line-num">1106</span>       <span class="ruby-value">gender:</span> <span class="ruby-identifier">class_name_key</span>
<span class="line-num">1107</span>     ).<span class="ruby-identifier">html_safe</span>
<span class="line-num">1108</span>     <span class="ruby-identifier">s</span> = <span class="ruby-identifier">t</span>(<span class="ruby-value">:user_faved_a_noun_by_owner</span>, 
<span class="line-num">1109</span>       <span class="ruby-value">user:</span> <span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span>, 
<span class="line-num">1110</span>       <span class="ruby-value">noun:</span> <span class="ruby-identifier">noun</span>, 
<span class="line-num">1111</span>       <span class="ruby-value">owner:</span> <span class="ruby-identifier">you_or_login</span>(<span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_owner</span>, <span class="ruby-value">:capitalize_it</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>))
<span class="line-num">1112</span>     <span class="ruby-keyword">return</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1113</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1114</span> 
<span class="line-num">1115</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">resource_type</span>
<span class="line-num">1116</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;User&quot;</span>
<span class="line-num">1117</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">notifier_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Post&quot;</span>
<span class="line-num">1118</span>       <span class="ruby-identifier">post</span> = <span class="ruby-identifier">notifier</span>
<span class="line-num">1119</span>       <span class="ruby-identifier">title</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>]
<span class="line-num">1120</span>         <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">login</span>
<span class="line-num">1121</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1122</span>         <span class="ruby-identifier">link_to_user</span>(<span class="ruby-identifier">resource</span>)
<span class="line-num">1123</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1124</span>       <span class="ruby-identifier">article</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">1125</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:x_wrote_a_new_post_html</span>, <span class="ruby-value">:x</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">title</span>)
<span class="line-num">1126</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1127</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:x_wrote_y_new_posts_html</span>, <span class="ruby-value">:x</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">title</span>, <span class="ruby-value">:y</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>])
<span class="line-num">1128</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1129</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1130</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">1131</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:user_added_an_observation_html</span>, 
<span class="line-num">1132</span>           <span class="ruby-value">:user</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">login</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">url_for_resource_with_host</span>(<span class="ruby-identifier">resource</span>)))
<span class="line-num">1133</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1134</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:user_added_x_observations_html</span>,
<span class="line-num">1135</span>           <span class="ruby-value">:user</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">login</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">url_for_resource_with_host</span>(<span class="ruby-identifier">resource</span>)),
<span class="line-num">1136</span>           <span class="ruby-value">:x</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>])
<span class="line-num">1137</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1138</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1139</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Observation&quot;</span>
<span class="line-num">1140</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ObservationFieldValue</span>)
<span class="line-num">1141</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:user_added_an_observation_field_html</span>, <span class="ruby-value">:user</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">notifier_user_link</span>, <span class="ruby-value">:field_name</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">observation_field</span>.<span class="ruby-identifier">name</span>),
<span class="line-num">1142</span>         <span class="ruby-value">:owner</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">you_or_login</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">user</span>, <span class="ruby-value">:capitalize_it</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>))
<span class="line-num">1143</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1144</span>       <span class="ruby-string">&quot;unknown&quot;</span>
<span class="line-num">1145</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1146</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Project&quot;</span>
<span class="line-num">1147</span>     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">resource</span>
<span class="line-num">1148</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">notifier_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Post&quot;</span>
<span class="line-num">1149</span>       <span class="ruby-identifier">post</span> = <span class="ruby-identifier">notifier</span>
<span class="line-num">1150</span>       <span class="ruby-identifier">title</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>]
<span class="line-num">1151</span>         <span class="ruby-identifier">project</span>.<span class="ruby-identifier">title</span>
<span class="line-num">1152</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1153</span>         <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">project</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">project_journal_post_url</span>(<span class="ruby-value">:project_id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value">:id</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>))
<span class="line-num">1154</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1155</span>       <span class="ruby-identifier">article</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">1156</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:x_wrote_a_new_post_html</span>, <span class="ruby-value">:x</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">title</span>)
<span class="line-num">1157</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1158</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:x_wrote_y_new_posts_html</span>, <span class="ruby-value">:x</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">title</span>, <span class="ruby-value">:y</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:count</span>])
<span class="line-num">1159</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1160</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1161</span>       <span class="ruby-identifier">title</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>]
<span class="line-num">1162</span>         <span class="ruby-identifier">project</span>.<span class="ruby-identifier">title</span>
<span class="line-num">1163</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1164</span>         <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">project</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">url_for_resource_with_host</span>(<span class="ruby-identifier">project</span>))
<span class="line-num">1165</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1166</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">notification</span> <span class="ruby-operator">==</span> <span class="ruby-constant">UpdateAction</span><span class="ruby-operator">::</span><span class="ruby-constant">YOUR_OBSERVATIONS_ADDED</span>
<span class="line-num">1167</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:project_curators_added_some_of_your_observations_html</span>, <span class="ruby-value">url:</span> <span class="ruby-identifier">project_url</span>(<span class="ruby-identifier">resource</span>), <span class="ruby-value">project:</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">title</span>)
<span class="line-num">1168</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1169</span>         <span class="ruby-identifier">t</span>(<span class="ruby-value">:curators_changed_for_x_html</span>, <span class="ruby-value">:x</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">title</span>)
<span class="line-num">1170</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1171</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1172</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;ProjectUserInvitation&quot;</span>
<span class="line-num">1173</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>]
<span class="line-num">1174</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:user_invited_you_to_join_project</span>, <span class="ruby-value">:user</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-value">:project</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">title</span>)
<span class="line-num">1175</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1176</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:user_invited_you_to_join_project</span>, <span class="ruby-value">:user</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">notifier_user_link</span>, <span class="ruby-value">:project</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">project_url</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">project</span>))).<span class="ruby-identifier">html_safe</span>
<span class="line-num">1177</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1178</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Place&quot;</span>
<span class="line-num">1179</span>     <span class="ruby-identifier">t</span>(<span class="ruby-value">:new_observations_from_place_html</span>, 
<span class="line-num">1180</span>       <span class="ruby-value">:place</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">display_name</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">display_name</span>, <span class="ruby-identifier">url_for_resource_with_host</span>(<span class="ruby-identifier">resource</span>)))
<span class="line-num">1181</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Taxon&quot;</span>
<span class="line-num">1182</span>     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">render</span>( 
<span class="line-num">1183</span>       <span class="ruby-value">:partial</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;shared/taxon&quot;</span>, 
<span class="line-num">1184</span>       <span class="ruby-value">:object</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">resource</span>,
<span class="line-num">1185</span>       <span class="ruby-value">:locals</span> <span class="ruby-operator">=&gt;</span> {
<span class="line-num">1186</span>         <span class="ruby-value">:link_url</span> <span class="ruby-operator">=&gt;</span> (<span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">url_for_resource_with_host</span>(<span class="ruby-identifier">resource</span>))
<span class="line-num">1187</span>       })
<span class="line-num">1188</span>     <span class="ruby-identifier">t</span>(<span class="ruby-value">:new_observations_of_x_html</span>, <span class="ruby-value">:x</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">name</span>)
<span class="line-num">1189</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Flag&quot;</span>
<span class="line-num">1190</span>     <span class="ruby-identifier">noun</span> = <span class="ruby-identifier">t</span>(<span class="ruby-value">:a_flag_for_x</span>, <span class="ruby-value">x:</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">flaggable</span>.<span class="ruby-identifier">try_methods</span>( <span class="ruby-value">:name</span>, <span class="ruby-value">:title</span>, <span class="ruby-value">:to_plain_s</span> ) )
<span class="line-num">1191</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Flag</span>)
<span class="line-num">1192</span>       <span class="ruby-identifier">subject</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>]
<span class="line-num">1193</span>         <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">resolver</span>
<span class="line-num">1194</span>           <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">login</span>
<span class="line-num">1195</span>         <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">resolver_id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">resolver_id</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
<span class="line-num">1196</span>           <span class="ruby-string">&quot;iNaturalist&quot;</span>
<span class="line-num">1197</span>         <span class="ruby-keyword">else</span>
<span class="line-num">1198</span>           <span class="ruby-identifier">t</span>(<span class="ruby-value">:deleted_user</span>)
<span class="line-num">1199</span>         <span class="ruby-keyword">end</span>
<span class="line-num">1200</span>       <span class="ruby-keyword">else</span>
<span class="line-num">1201</span>         <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">resolver_id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">resolver_id</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
<span class="line-num">1202</span>           <span class="ruby-string">&quot;iNaturalist&quot;</span>
<span class="line-num">1203</span>         <span class="ruby-keyword">else</span>
<span class="line-num">1204</span>           <span class="ruby-identifier">link_to_user</span>( <span class="ruby-identifier">notifier</span>.<span class="ruby-identifier">resolver</span> )
<span class="line-num">1205</span>         <span class="ruby-keyword">end</span>
<span class="line-num">1206</span>       <span class="ruby-keyword">end</span>
<span class="line-num">1207</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:subject_resolved_noun_html</span>, <span class="ruby-value">subject:</span> <span class="ruby-identifier">subject</span>, <span class="ruby-value">noun:</span> <span class="ruby-identifier">noun</span>)
<span class="line-num">1208</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1209</span>       <span class="ruby-identifier">activity_snippet</span>(<span class="ruby-identifier">update</span>, <span class="ruby-identifier">notifier</span>, <span class="ruby-identifier">notifier_user</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:noun</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">noun</span>))
<span class="line-num">1210</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1211</span>   <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;TaxonChange&quot;</span>
<span class="line-num">1212</span>     <span class="ruby-identifier">notifier_user</span> = <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">committer</span>
<span class="line-num">1213</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">notifier_user</span>
<span class="line-num">1214</span>       <span class="ruby-identifier">notifier_class_name</span> = <span class="ruby-identifier">t</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">underscore</span>)
<span class="line-num">1215</span>       <span class="ruby-identifier">subject</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_links</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">notifier_user</span>.<span class="ruby-identifier">login</span>, <span class="ruby-identifier">person_url</span>(<span class="ruby-identifier">notifier_user</span>)).<span class="ruby-identifier">html_safe</span>
<span class="line-num">1216</span>       <span class="ruby-identifier">object</span> = <span class="ruby-node">&quot;&lt;strong&gt;#{notifier_class_name}&lt;/strong&gt;&quot;</span>.<span class="ruby-identifier">html_safe</span>
<span class="line-num">1217</span>       <span class="ruby-identifier">t</span>( <span class="ruby-value">:subject_committed_thing_affecting_stuff_html</span>,
<span class="line-num">1218</span>         <span class="ruby-value">subject:</span> <span class="ruby-identifier">subject</span>,
<span class="line-num">1219</span>         <span class="ruby-value">vow_or_con:</span> <span class="ruby-identifier">notifier_class_name</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">downcase</span>,
<span class="line-num">1220</span>         <span class="ruby-value">gender:</span> <span class="ruby-identifier">object</span>,
<span class="line-num">1221</span>         <span class="ruby-value">thing:</span> <span class="ruby-identifier">object</span>,
<span class="line-num">1222</span>         <span class="ruby-value">stuff:</span> <span class="ruby-identifier">commas_and</span>( <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">input_taxa</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>) )
<span class="line-num">1223</span>       )
<span class="line-num">1224</span>     <span class="ruby-keyword">else</span>
<span class="line-num">1225</span>       <span class="ruby-identifier">t</span>(<span class="ruby-value">:subject_affecting_stuff_html</span>, 
<span class="line-num">1226</span>         <span class="ruby-value">:subject</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">t</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">underscore</span>), 
<span class="line-num">1227</span>         <span class="ruby-value">:stuff</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">commas_and</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">input_taxa</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)))
<span class="line-num">1228</span>     <span class="ruby-keyword">end</span>
<span class="line-num">1229</span>   <span class="ruby-keyword">else</span>
<span class="line-num">1230</span>     <span class="ruby-string">&quot;update&quot;</span>
<span class="line-num">1231</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1232</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-uri_join">
            
              <b>uri_join</b>(*args)
            
            <a href="../classes/ApplicationHelper.html#method-i-uri_join" name="method-i-uri_join" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-uri_join_source')" id="l_method-i-uri_join_source">show</a>
                

                

                
              </p>
              <div id="method-i-uri_join_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1372</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">uri_join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="line-num">1373</span>   <span class="ruby-constant">URI</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>.<span class="ruby-identifier">compact</span>).<span class="ruby-identifier">to_s</span>
<span class="line-num">1374</span> <span class="ruby-keyword">rescue</span> <span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidURIError</span>
<span class="line-num">1375</span>   <span class="ruby-identifier">args</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;/&#39;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\/+/</span>, <span class="ruby-string">&#39;/&#39;</span>)
<span class="line-num">1376</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-url_for_license">
            
              <b>url_for_license</b>(code)
            
            <a href="../classes/ApplicationHelper.html#method-i-url_for_license" name="method-i-url_for_license" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-url_for_license_source')" id="l_method-i-url_for_license_source">show</a>
                

                

                
              </p>
              <div id="method-i-url_for_license_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">989</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">url_for_license</span>(<span class="ruby-identifier">code</span>)
<span class="line-num">990</span>   <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">code</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">991</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">info</span> = <span class="ruby-constant">Photo</span><span class="ruby-operator">::</span><span class="ruby-constant">LICENSE_INFO</span>.<span class="ruby-identifier">detect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>[<span class="ruby-value">:code</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">code</span>}.<span class="ruby-identifier">try</span>(<span class="ruby-value">:last</span>)
<span class="line-num">992</span>     <span class="ruby-identifier">info</span>[<span class="ruby-value">:url</span>]
<span class="line-num">993</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Observation</span><span class="ruby-operator">::</span><span class="ruby-constant">CC0</span>
<span class="line-num">994</span>     <span class="ruby-node">&quot;https://creativecommons.org/publicdomain/zero/#{Shared::LicenseModule::CC0_VERSION}/&quot;</span>
<span class="line-num">995</span>   <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">code</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/CC\-/</span>
<span class="line-num">996</span>     <span class="ruby-node">&quot;http://creativecommons.org/licenses/#{code[/CC\-(.+)/, 1].downcase}/#{Shared::LicenseModule::CC_VERSION}/&quot;</span>
<span class="line-num">997</span>   <span class="ruby-keyword">end</span>
<span class="line-num">998</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-url_for_params">
            
              <b>url_for_params</b>( options = {} )
            
            <a href="../classes/ApplicationHelper.html#method-i-url_for_params" name="method-i-url_for_params" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Generate a URL based on the current params hash, overriding existing values with the hash passed in.  To remove existing values, specify them with :without =&gt; [:some, :keys] Example: <a href="ApplicationHelper.html#method-i-url_for_params"><code>url_for_params</code></a>(:taxon_id =&gt; 1, :without =&gt; :page)</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-url_for_params_source')" id="l_method-i-url_for_params_source">show</a>
                

                

                
              </p>
              <div id="method-i-url_for_params_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">244</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">url_for_params</span>( <span class="ruby-identifier">options</span> = {} )
<span class="line-num">245</span>   <span class="ruby-identifier">new_params</span> = <span class="ruby-identifier">request</span>.<span class="ruby-constant">POST</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-identifier">request</span>.<span class="ruby-constant">GET</span> ).<span class="ruby-identifier">merge</span>( <span class="ruby-identifier">options</span> )
<span class="line-num">246</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">without</span> = <span class="ruby-identifier">new_params</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:without</span>)
<span class="line-num">247</span>     <span class="ruby-identifier">without</span> = [<span class="ruby-identifier">without</span>] <span class="ruby-keyword">unless</span> <span class="ruby-identifier">without</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
<span class="line-num">248</span>     <span class="ruby-identifier">without</span>.<span class="ruby-identifier">map!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_s</span>)
<span class="line-num">249</span>     <span class="ruby-identifier">new_params</span> = <span class="ruby-identifier">new_params</span>.<span class="ruby-identifier">reject</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">without</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">k</span>) }
<span class="line-num">250</span>   <span class="ruby-keyword">end</span>
<span class="line-num">251</span>   <span class="ruby-identifier">url_for</span>( <span class="ruby-identifier">new_params</span> )
<span class="line-num">252</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-url_for_referrer_or_default">
            
              <b>url_for_referrer_or_default</b>( default )
            
            <a href="../classes/ApplicationHelper.html#method-i-url_for_referrer_or_default" name="method-i-url_for_referrer_or_default" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-url_for_referrer_or_default_source')" id="l_method-i-url_for_referrer_or_default_source">show</a>
                

                

                
              </p>
              <div id="method-i-url_for_referrer_or_default_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1555</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">url_for_referrer_or_default</span>( <span class="ruby-identifier">default</span> )
<span class="line-num">1556</span>   <span class="ruby-identifier">back_url</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;HTTP_REFERER&quot;</span>]
<span class="line-num">1557</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">back_url</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>[<span class="ruby-identifier">request</span>.<span class="ruby-identifier">path</span>, <span class="ruby-identifier">request</span>.<span class="ruby-identifier">url</span>].<span class="ruby-identifier">include?</span>( <span class="ruby-identifier">back_url</span> )
<span class="line-num">1558</span>     <span class="ruby-keyword">return</span> <span class="ruby-identifier">back_url</span>
<span class="line-num">1559</span>   <span class="ruby-keyword">end</span>
<span class="line-num">1560</span>   <span class="ruby-identifier">default</span>
<span class="line-num">1561</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-url_for_resource_with_host">
            
              <b>url_for_resource_with_host</b>(resource)
            
            <a href="../classes/ApplicationHelper.html#method-i-url_for_resource_with_host" name="method-i-url_for_resource_with_host" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-url_for_resource_with_host_source')" id="l_method-i-url_for_resource_with_host_source">show</a>
                

                

                
              </p>
              <div id="method-i-url_for_resource_with_host_source" class="dyn-source">
                <pre>     <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">1277</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">url_for_resource_with_host</span>(<span class="ruby-identifier">resource</span>)
<span class="line-num">1278</span>   <span class="ruby-identifier">polymorphic_url</span>(<span class="ruby-identifier">resource</span>)
<span class="line-num">1279</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-user_image">
            
              <b>user_image</b>(user, options = {})
            
            <a href="../classes/ApplicationHelper.html#method-i-user_image" name="method-i-user_image" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-user_image_source')" id="l_method-i-user_image_source">show</a>
                

                

                
              </p>
              <div id="method-i-user_image_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">417</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">user_image</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">418</span>   <span class="ruby-identifier">user</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>
<span class="line-num">419</span>   <span class="ruby-identifier">size</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:size</span>)
<span class="line-num">420</span>   <span class="ruby-identifier">style</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:style</span>]
<span class="line-num">421</span>   <span class="ruby-identifier">css_class</span> = <span class="ruby-node">&quot;user_image #{options[:class]}&quot;</span>
<span class="line-num">422</span>   <span class="ruby-identifier">css_class</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; usericon&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-node">%w(mini small thumb)</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">size</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">size</span>.<span class="ruby-identifier">blank?</span>
<span class="line-num">423</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:alt</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">login</span>
<span class="line-num">424</span>   <span class="ruby-identifier">options</span>[<span class="ruby-value">:title</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">login</span>
<span class="line-num">425</span>   <span class="ruby-identifier">image_tag</span>( <span class="ruby-identifier">user</span>.<span class="ruby-identifier">icon</span>.<span class="ruby-identifier">url</span>( <span class="ruby-identifier">size</span> <span class="ruby-operator">||</span> <span class="ruby-value">:mini</span> ), <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-value">style:</span> <span class="ruby-identifier">style</span>, <span class="ruby-value">class:</span> <span class="ruby-identifier">css_class</span> ) )
<span class="line-num">426</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-user_seen_announcement-3F">
            
              <b>user_seen_announcement?</b>(announcement)
            
            <a href="../classes/ApplicationHelper.html#method-i-user_seen_announcement-3F" name="method-i-user_seen_announcement-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-user_seen_announcement-3F_source')" id="l_method-i-user_seen_announcement-3F_source">show</a>
                

                

                
              </p>
              <div id="method-i-user_seen_announcement-3F_source" class="dyn-source">
                <pre>    <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">428</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">user_seen_announcement?</span>(<span class="ruby-identifier">announcement</span>)
<span class="line-num">429</span>   <span class="ruby-identifier">session</span>[<span class="ruby-identifier">announcement</span>.<span class="ruby-identifier">session_key</span>]
<span class="line-num">430</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-windowed_pagination_links">
            
              <b>windowed_pagination_links</b>(pagingEnum, options)
            
            <a href="../classes/ApplicationHelper.html#method-i-windowed_pagination_links" name="method-i-windowed_pagination_links" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                 Source: 

                
                  <a href="javascript:toggleSource('method-i-windowed_pagination_links_source')" id="l_method-i-windowed_pagination_links_source">show</a>
                

                

                
              </p>
              <div id="method-i-windowed_pagination_links_source" class="dyn-source">
                <pre>   <span class="ruby-comment"># File app/helpers/application_helper.rb</span>
<span class="line-num">12</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">windowed_pagination_links</span>(<span class="ruby-identifier">pagingEnum</span>, <span class="ruby-identifier">options</span>)
<span class="line-num">13</span>   <span class="ruby-identifier">link_to_current_page</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:link_to_current_page</span>]
<span class="line-num">14</span>   <span class="ruby-identifier">always_show_anchors</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:always_show_anchors</span>]
<span class="line-num">15</span>   <span class="ruby-identifier">padding</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:window_size</span>]
<span class="line-num">16</span> 
<span class="line-num">17</span>   <span class="ruby-identifier">current_page</span> = <span class="ruby-identifier">pagingEnum</span>.<span class="ruby-identifier">page</span>
<span class="line-num">18</span>   <span class="ruby-identifier">html</span> = <span class="ruby-string">&#39;&#39;</span>
<span class="line-num">19</span> 
<span class="line-num">20</span>   <span class="ruby-comment">#Calculate the window start and end pages</span>
<span class="line-num">21</span>   <span class="ruby-identifier">padding</span> = <span class="ruby-identifier">padding</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">padding</span>
<span class="line-num">22</span>   <span class="ruby-identifier">first</span> = <span class="ruby-identifier">pagingEnum</span>.<span class="ruby-identifier">page_exists?</span>(<span class="ruby-identifier">current_page</span>  <span class="ruby-operator">-</span> <span class="ruby-identifier">padding</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">current_page</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">padding</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>
<span class="line-num">23</span>   <span class="ruby-identifier">last</span> = <span class="ruby-identifier">pagingEnum</span>.<span class="ruby-identifier">page_exists?</span>(<span class="ruby-identifier">current_page</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">padding</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">current_page</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">padding</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">pagingEnum</span>.<span class="ruby-identifier">last_page</span>
<span class="line-num">24</span> 
<span class="line-num">25</span>   <span class="ruby-comment"># Print start page if anchors are enabled</span>
<span class="line-num">26</span>   <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">yield</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">always_show_anchors</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
<span class="line-num">27</span> 
<span class="line-num">28</span>   <span class="ruby-comment"># Print window pages</span>
<span class="line-num">29</span>   <span class="ruby-identifier">first</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-identifier">last</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
<span class="line-num">30</span>     (<span class="ruby-identifier">current_page</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">page</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">link_to_current_page</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">page</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">page</span>)
<span class="line-num">31</span>   <span class="ruby-keyword">end</span>
<span class="line-num">32</span> 
<span class="line-num">33</span>   <span class="ruby-comment"># Print end page if anchors are enabled</span>
<span class="line-num">34</span>   <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">pagingEnum</span>.<span class="ruby-identifier">last_page</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">always_show_anchors</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">last</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pagingEnum</span>.<span class="ruby-identifier">last_page</span>
<span class="line-num">35</span>   <span class="ruby-identifier">html</span>
<span class="line-num">36</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
